<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator Prompt AI by Sing Sareh</title>
    <!-- Tailwind CSS CDN untuk styling yang cepat dan responsif -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Menggunakan font Inter untuk tampilan yang bersih */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Latar belakang lebih lembut */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 1rem; /* Tambahkan padding untuk layar kecil */
            box-sizing: border-box; /* Pastikan padding tidak menambah lebar */
        }
        .container {
            max-width: 90%; /* Lebar responsif */
            width: 900px; /* Lebar maksimum di desktop, sedikit lebih lebar */
            background-color: #ffffff; /* Warna terang untuk kontainer */
            border-radius: 1.5rem; /* Sudut membulat */
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15); /* Bayangan yang lebih halus */
            padding: 2.5rem; /* Padding yang cukup */
            text-align: center;
            animation: fadeIn 0.8s ease-out; /* Animasi masuk */
            border: 1px solid #dae1e7; /* Border lembut */
        }

        /* Animasi fadeIn untuk elemen container */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Gaya untuk area loading */
        .loading-spinner {
            border: 4px solid #e2e8f0; /* Light grey */
            border-top: 4px solid #3b82f6; /* Blue */
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Gaya untuk tab navigasi */
        .tab-button {
            @apply flex-1 py-3 px-2 sm:px-4 text-center font-semibold text-gray-600 border-b-2 border-transparent hover:border-blue-400 transition-all duration-200 cursor-pointer flex items-center justify-center gap-2;
        }
        .tab-button.active {
            @apply text-blue-600 border-blue-600 shadow-sm;
        }

        /* Gaya untuk input dan select */
        .form-input, select, textarea {
            @apply w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 transition duration-200 bg-white text-gray-800 placeholder-gray-400 min-w-0; /* Added min-w-0 */
        }
        .form-input:focus, select:focus, textarea:focus {
            @apply ring-blue-200 border-blue-400;
        }
        .form-label {
            @apply block text-gray-700 text-sm font-bold mb-2;
        }

        /* Gaya tombol */
        .button-primary {
            @apply bg-gradient-to-r from-blue-600 to-indigo-700 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform transition duration-300 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300 flex items-center justify-center;
        }
        .button-secondary {
            @apply bg-gray-200 text-gray-800 font-bold py-3 px-8 rounded-full shadow-md hover:shadow-lg transform transition duration-300 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-gray-300 flex items-center justify-center;
        }
        .button-feature {
            @apply text-white font-bold py-3 px-8 rounded-full shadow-md hover:shadow-lg transform transition duration-300 hover:scale-105 focus:outline-none focus:ring-4 flex items-center justify-center;
        }
        /* Brighter feature button colors with more subtle shadows */
        #improvePromptButton { @apply bg-purple-600 focus:ring-purple-300 shadow-md hover:shadow-lg; }
        #suggestKeywordsButton { @apply bg-orange-600 focus:ring-orange-300 shadow-md hover:shadow-lg; }
        #generateDescriptionButton { @apply bg-blue-600 focus:ring-blue-300 shadow-md hover:shadow-lg; }
        #generateVariationsButton { @apply bg-teal-600 focus:ring-teal-300 shadow-md hover:shadow-lg; }
        #correctGrammarButton { @apply bg-indigo-600 focus:ring-indigo-300 shadow-md hover:shadow-lg; }
        #suggestColorPaletteButton { @apply bg-rose-600 focus:ring-rose-300 shadow-md hover:shadow-lg; }
        #suggestConceptsButton { @apply bg-fuchsia-600 focus:ring-fuchsia-300 shadow-md hover:shadow-lg; }
        #translatePromptButton { @apply bg-pink-600 focus:ring-pink-300 shadow-md hover:shadow-lg; }
        #evaluatePromptButton { @apply bg-cyan-600 focus:ring-cyan-300 shadow-md hover:shadow-lg; }


        /* Area Hasil */
        .result-container {
            @apply p-6 bg-white rounded-2xl border border-gray-200 shadow-inner flex flex-col gap-6 text-left;
        }
        .result-label {
            @apply block text-gray-700 text-md font-bold mb-2;
        }
        .result-textarea, .result-input {
            @apply w-full p-3 bg-gray-50 border border-gray-300 rounded-lg text-gray-800 resize-y;
        }
        .result-copy-button {
            @apply mt-2 bg-blue-500 text-white font-bold py-2 px-6 rounded-full shadow-md hover:shadow-lg transform transition duration-300 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-blue-300;
        }
        #resultText {
            @apply text-gray-600; /* Darker grey for better readability on light background */
        }
        #errorMessage {
            @apply text-red-600;
        }

        /* Remove glowing text effect as per request for a cleaner look */
        .glowing-text {
            text-shadow: none;
            color: #1a1a2e; /* Dark color for the title text */
        }
        /* Adjust the gradient background for the title to be softer */
        .title-gradient-bg {
            background-image: linear-gradient(to right, #3b82f6, #6366f1); /* Softer blue-purple gradient */
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }


        /* Styles for tab content boxes */
        .tab-content-box {
            @apply p-6 rounded-2xl border; /* Changed border-2 to border for subtlety */
        }
        /* Lighter, distinct borders for tab content boxes */
        #imagePromptInputs {
            @apply bg-white border-blue-200 shadow-md shadow-blue-50;
        }
        #videoPromptInputs {
            @apply bg-white border-green-200 shadow-md shadow-green-50;
        }
        #directorPromptInputs {
            @apply bg-white border-yellow-200 shadow-md shadow-yellow-50;
        }
        #textPromptInputs {
            @apply bg-white border-pink-200 shadow-md shadow-pink-50;
        }
        #galleryInputs {
            @apply bg-white border-purple-200 shadow-md shadow-purple-50;
        }

        /* Adjusted text color for general info paragraphs in light theme */
        .info-text {
            @apply text-gray-700; /* Darker grey for better readability */
        }
        .info-box-text {
            @apply text-gray-700; /* Darker grey for "coming soon" boxes */
        }
        .info-box-title {
            @apply text-blue-700; /* Darker blue for "coming soon" box titles */
        }

        /* Specific adjustments for grid layout to prevent overlap */
        /* Removed direct margin-bottom from .grid > div to rely on gap-y */
        .grid {
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); /* Ensure minimum width for columns */
        }
        .grid > div {
            /* Ensures each grid item correctly contains its label and input */
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: flex-start;
        }
        .grid .md\:col-span-3 {
            grid-column: span 3 / span 3; /* Ensures full-span elements take full width */
        }
        .grid .md\:col-span-2 {
            grid-column: span 2 / span 2;
        }


        /* Responsif untuk layar kecil */
        @media (max-width: 768px) {
            .container {
                padding: 1.5rem;
                border-radius: 1rem;
            }
            .form-input, select, textarea {
                font-size: 0.9rem;
            }
            .button-group button {
                padding: 0.75rem 1.25rem;
                font-size: 0.9rem;
            }
            body {
                align-items: flex-start; /* Untuk memastikan konten dimulai dari atas di layar kecil */
                padding-top: 2rem;
            }
            .tab-button {
                font-size: 0.85rem;
                padding: 0.75rem 0.5rem;
            }
            /* Adjust grid for small screens to be single column */
            .grid {
                grid-template-columns: 1fr;
            }
            .grid .md\:col-span-3, .grid .md\:col-span-2 {
                grid-column: span 1 / span 1; /* Reset span for small screens */
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
    <div class="container">
        <h1 class="text-4xl font-extrabold mb-6 rounded-lg p-2 shadow-lg transform transition duration-300 hover:scale-105 glowing-text title-gradient-bg">
            GENERATOR PROMPT AI <br> <span class="text-2xl">by Sing Sareh</span>
        </h1>

        <p class="text-lg info-text mb-8">
            Isi bidang-bidang di bawah untuk membuat prompt yang sangat detail dan siap dijual!
        </p>

        <!-- Prompt Type Selection (Tabs) -->
        <div class="mb-8 border-b border-gray-300 flex justify-center">
            <button class="tab-button active" data-tab="image">
                <span role="img" aria-label="Gambar">🖼️</span> Gambar
            </button>
            <button class="tab-button" data-tab="video">
                <span role="img" aria-label="Video Tunggal">🎬</span> Video Tunggal
            </button>
            <button class="tab-button" data-tab="director">
                <span role="img" aria-label="Sutradara">🎥</span> Sutradara
            </button>
            <button class="tab-button" data-tab="text">
                <span role="img" aria-label="Teks">✍️</span> Teks
            </button>
            <button class="tab-button" data-tab="gallery">
                <span role="img" aria-label="Galeri">🗄️</span> Galeri
            </button>
        </div>

        <!-- Image Prompt Inputs -->
        <div id="imagePromptInputs" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 mb-8 text-left tab-content-box">
            <!-- Gaya Gambar -->
            <div>
                <label for="imageStyleSelect" class="form-label">Pilih Gaya Gambar:</label>
                <select id="imageStyleSelect" class="form-input">
                    <option value="Fotorealistik">Fotorealistik (Hyperrealism, High Detail)</option>
                    <option value="Animasi 3D">Animasi 3D (Pixar/Disney Style, Vibrant Colors)</option>
                    <option value="Seni Digital">Seni Digital (Digital Painting, Concept Art)</option>
                    <option value="Ilustrasi Cat Air">Ilustrasi Cat Air (Watercolor Illustration, Soft Blends)</option>
                    <option value="Vektor Minimalis">Vektor Minimalis (Flat Design, Clean Lines)</option>
                    <option value="Retro/Vintage">Retro/Vintage (Old School, Grainy Texture)</option>
                    <option value="Fantasi Gelap">Fantasi Gelap (Dark Fantasy, Epic, Gritty)</option>
                    <option value="Cyborg/Sci-Fi">Cyborg/Sci-Fi (Futuristic, Neon Lights, Robotic)</option>
                </select>
            </div>

            <!-- Kategori Gambar -->
            <div>
                <label for="imageCategorySelect" class="form-label">Pilih Kategori Gambar:</label>
                <select id="imageCategorySelect" class="form-input">
                    <option value="Default">Pilih Kategori (Default)</option>
                    <option value="Manusia/Potret">Manusia/Potret</option>
                    <option value="Alam/Lanskap">Alam/Lanskap</option>
                    <option value="Hewan">Hewan</option>
                    <option value="Teknologi">Teknologi</option>
                    <option value="Travel">Travel</option>
                    <option value="Makanan & Minuman">Makanan & Minuman</option>
                    <option value="Arsitektur">Arsitektur</option>
                    <option value="Objek/Produk">Objek/Produk</option>
                    <option value="Konsep/Abstrak">Konsep/Abstrak</option>
                    <option value="Latar Belakang">Latar Belakang</option>
                    <option value="Wallpaper">Wallpaper</option>
                    <option value="Rambu-rambu/Simbol">Rambu-rambu/Simbol</option>
                </select>
            </div>

            <!-- Sudut Kamera -->
            <div>
                <label for="cameraAngleSelect" class="form-label">Sudut Kamera:</label>
                <select id="cameraAngleSelect" class="form-input">
                    <option value="Default">Pilih Sudut Kamera (Default)</option>
                    <option value="Low Angle Shot">Low Angle Shot</option>
                    <option value="High Angle Shot">High Angle Shot</option>
                    <option value="Eye-Level Shot">Eye-Level Shot</option>
                    <option value="Close-up Shot">Close-up Shot</option>
                    <option value="Medium Shot">Medium Shot</option>
                    <option value="Wide Shot">Wide Shot</option>
                    <option value="Dutch Angle">Dutch Angle</option>
                    <option value="Over-the-Shoulder Shot">Over-the-Shoulder Shot</option>
                </select>
            </div>

            <!-- Waktu/Pencahayaan -->
            <div>
                <label for="timeOfDaySelect" class="form-label">Waktu/Pencahayaan:</label>
                <select id="timeOfDaySelect" class="form-input">
                    <option value="Default">Pilih Waktu/Pencahayaan (Default)</option>
                    <option value="Golden Hour">Golden Hour (Cahaya Keemasan Sore)</option>
                    <option value="Sunrise Glow">Sunrise Glow (Cahaya Matahari Terbit)</option>
                    <option value="Midday Bright">Midday Bright (Cahaya Terang Siang)</option>
                    <option value="Overcast/Cloudy">Overcast/Cloudy (Mendung)</option>
                    <option value="Night Scene, Neon Lights">Night Scene, Neon Lights (Malam, Lampu Neon)</option>
                    <option value="Blue Hour">Blue Hour (Cahaya Biru Senja/Fajar)</option>
                    <option value="Dramatic Backlighting">Dramatic Backlighting (Lampu Latar Dramatis)</option>
                </select>
            </div>

            <!-- Bidang Input Teks -->
            <div>
                <label for="subjectInput" class="form-label">Subjek (Siapa/Apa?):</label>
                <input
                    type="text"
                    id="subjectInput"
                    class="form-input"
                    placeholder="Contoh: 'Pasangan Muslim muda' atau 'Latar belakang gunung'"
                >
            </div>

            <div>
                <label for="actionInput" class="form-label">Aksi (Apa yang dilakukan/terjadi?):</label>
                <input
                    type="text"
                    id="actionInput"
                    class="form-input"
                    placeholder="Contoh: 'Duduk bersama', 'Rambu lalu lintas berkedip'"
                >
            </div>

            <div>
                <label for="settingInput" class="form-label">Pengaturan (Di mana/Latar belakang?):</label>
                <input
                    type="text"
                    id="settingInput"
                    class="form-input"
                    placeholder="Contoh: 'Resepsi outdoor di beranda mewah', 'Jalan kota yang ramai'"
                >
            </div>

            <div>
                <label for="moodInput" class="form-label">Suasana/Emosi Utama:</label>
                <input
                    type="text"
                    id="moodInput"
                    class="form-input"
                    placeholder="Contoh: 'Serene joy dan understated luxury' atau 'Sibuk, energi perkotaan'"
                >
            </div>
            
            <!-- New Input Fields for Detailed Subject Attributes -->
            <div>
                <label for="materialTextureInput" class="form-label">Bahan/Tekstur (Opsional):</label>
                <input
                    type="text"
                    id="materialTextureInput"
                    class="form-input"
                    placeholder="Contoh: 'Kulit berkilau', 'Kayu kasar', 'Sutra halus'"
                >
            </div>

            <div>
                <label for="expressionEmotionInput" class="form-label">Ekspresi/Emosi (untuk karakter, Opsional):</label>
                <input
                    type="text"
                    id="expressionEmotionInput"
                    class="form-input"
                    placeholder="Contoh: 'Senyum tulus', 'Mata berbinar', 'Wajah penuh harap'"
                >
            </div>

            <div>
                <label for="ageEraInput" class="form-label">Usia/Era (untuk objek/adegan, Opsional):</label>
                <input
                    type="text"
                    id="ageEraInput"
                    class="form-input"
                    placeholder="Contoh: 'Mobil klasik tahun 1950-an', 'Arsitektur abad pertengahan'"
                >
            </div>

            <!-- New Input Fields for Aspect Ratio and Resolution -->
            <div>
                <label for="aspectRatioSelect" class="form-label">Rasio Aspek (Opsional):</label>
                <select id="aspectRatioSelect" class="form-input">
                    <option value="Default">Pilih Rasio Aspek (Default)</option>
                    <option value="1:1">1:1 (Square)</option>
                    <option value="3:2">3:2 (Classic Photo)</option>
                    <option value="4:3">4:3 (Traditional Display)</option>
                    <option value="16:9">16:9 (Widescreen)</option>
                    <option value="21:9">21:9 (Ultrawide)</option>
                    <option value="2:3">2:3 (Portrait)</option>
                    <option value="3:4">3:4 (Traditional Portrait)</option>
                </select>
            </div>

            <div>
                <label for="resolutionSelect" class="form-label">Resolusi (Opsional):</label>
                <select id="resolutionSelect" class="form-input">
                    <option value="Default">Pilih Resolusi (Default)</option>
                    <option value="Standard Definition">Standard Definition (SD)</option>
                    <option value="High Definition">High Definition (HD)</option>
                    <option value="Full HD">Full HD (FHD)</option>
                    <option value="Quad HD">Quad HD (QHD)</option>
                    <option value="4K UHD">4K UHD</option>
                    <option value="8K UHD">8K UHD</option>
                    <option value="Ultra-High Resolution">Ultra-High Resolution (8K+)</option>
                </select>
            </div>
            
            <div class="md:col-span-3"> <!-- Make this span full width in larger screens -->
                <label for="promptIdeaInput" class="form-label">Ide Tambahan (Opsional, untuk detail lain-lain):</label>
                <textarea
                    id="promptIdeaInput"
                    class="form-input"
                    placeholder="Contoh: 'Detail henna yang rumit, cincin kawin elegan. Arsitektur Islam subtle.' atau 'Refleksi lampu neon di genangan air.'"
                    rows="3"
                ></textarea>
            </div>

            <div class="md:col-span-3"> <!-- Make this span full width in larger screens -->
                <label for="negativePromptInput" class="form-label">Prompt Negatif (Apa yang TIDAK diinginkan, Opsional):</label>
                <textarea
                    id="negativePromptInput"
                    class="form-input border-red-300 focus:ring-red-400"
                    placeholder="Contoh: 'Buruk, cacat, buram, teks, tanda air, logo'"
                    rows="3"
                ></textarea>
            </div>
        </div>

        <!-- Video Prompt Inputs (Initially Hidden) -->
        <div id="videoPromptInputs" class="hidden grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 mb-8 text-left tab-content-box">
            <div>
                <label for="videoSubjectInput" class="form-label">Subjek Video (Siapa/Apa?):</label>
                <input
                    type="text"
                    id="videoSubjectInput"
                    class="form-input"
                    placeholder="Contoh: 'Drone terbang di atas hutan tropis'"
                >
            </div>
            <div>
                <label for="videoActionInput" class="form-label">Aksi Video (Apa yang terjadi?):</label>
                <input
                    type="text"
                    id="videoActionInput"
                    class="form-input"
                    placeholder="Contoh: 'Merekam pemandangan matahari terbit, perlahan bergerak maju'"
                >
            </div>
            <div>
                <label for="videoSettingInput" class="form-label">Pengaturan Video (Di mana/Latar belakang?):</label>
                <input
                    type="text"
                    id="videoSettingInput"
                    class="form-input"
                    placeholder="Contoh: 'Puncak gunung yang berkabut saat fajar'"
                >
            </div>
            <div>
                <label for="videoMoodInput" class="form-label">Suasana/Emosi Video:</label>
                <input
                    type="text"
                    id="videoMoodInput"
                    class="form-input"
                    placeholder="Contoh: 'Menenangkan, megah, inspiratif'"
                >
            </div>
            <div>
                <label for="videoDurationInput" class="form-label">Durasi Video (detik):</label>
                <input
                    type="number"
                    id="videoDurationInput"
                    class="form-input"
                    placeholder="Contoh: 15"
                    min="1"
                >
            </div>
            <!-- Pergerakan Kamera (Dropdown) -->
            <div>
                <label for="cameraMovementSelect" class="form-label">Pergerakan Kamera:</label>
                <select id="cameraMovementSelect" class="form-input">
                    <option value="Default">Pilih Pergerakan Kamera (Default)</option>
                    <option value="Pan (Horizontal)">Pan (Horizontal)</option>
                    <option value="Tilt (Vertical)">Tilt (Vertical)</option>
                    <option value="Zoom In">Zoom In</option>
                    <option value="Zoom Out">Zoom Out</option>
                    <option value="Dolly In/Out">Dolly In/Out (Maju/Mundur)</option>
                    <option value="Trucking (Lateral)">Trucking (Lateral)</option>
                    <option value="Pedestal (Up/Down)">Pedestal (Naik/Turun)</option>
                    <option value="Crane/Boom Shot">Crane/Boom Shot</option>
                    <option value="Handheld/Shakey">Handheld/Shakey</option>
                    <option value="Drone Shot (Aerial)">Drone Shot (Udara)</option>
                    <option value="Static Shot">Static Shot (Diam)</option>
                </select>
            </div>
            <!-- Gaya Video (New Field) -->
            <div>
                <label for="videoStyleSelect" class="form-label">Gaya Video:</label>
                <select id="videoStyleSelect" class="form-input">
                    <option value="Default">Pilih Gaya Video (Default)</option>
                    <option value="Cinematic">Sinematik</option>
                    <option value="Documentary">Dokumenter</option>
                    <option value="Vlog Style">Gaya Vlog</option>
                    <option value="Music Video">Video Musik</option>
                    <option value="Commercial">Komersial</option>
                    <option value="Abstract">Abstrak</option>
                </select>
            </div>
            <!-- Bahasa Dialog (New Field) -->
            <div>
                <label for="dialogueLanguageInput" class="form-label">Bahasa Dialog (Opsional):</label>
                <input
                    type="text"
                    id="dialogueLanguageInput"
                    class="form-input"
                    placeholder="Contoh: 'Inggris', 'Indonesia', 'Tanpa dialog'"
                >
            </div>
            <div class="md:col-span-3">
                <label for="dialogueTextInput" class="form-label">Teks Dialog (Opsional):</label>
                <textarea
                    id="dialogueTextInput"
                    class="form-input"
                    placeholder="Contoh: 'Narator: Ini adalah kisah tentang...', 'Karakter A: Halo dunia!'"
                    rows="3"
                ></textarea>
            </div>
            <div class="md:col-span-3">
                <label for="videoIdeaInput" class="form-label">Ide Tambahan Video (Opsional):</label>
                <textarea
                    id="videoIdeaInput"
                    class="form-input"
                    placeholder="Contoh: 'Gerakan awan timelapse, pantulan di danau'"
                    rows="3"
                ></textarea>
            </div>
            <div class="md:col-span-3">
                <label for="videoNegativePromptInput" class="form-label">Prompt Negatif Video (Opsional):</label>
                <textarea
                    id="videoNegativePromptInput"
                    class="form-input border-red-300 focus:ring-red-400"
                    placeholder="Contoh: 'Goyangan kamera, artefak digital, orang'"
                    rows="3"
                ></textarea>
            </div>
        </div>

        <!-- Director Prompt Inputs -->
        <div id="directorPromptInputs" class="hidden grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-4 mb-8 text-left tab-content-box">
            <div>
                <label for="totalVideoDurationInput" class="form-label">Durasi Video Total (menit):</label>
                <input
                    type="number"
                    id="totalVideoDurationInput"
                    class="form-input"
                    placeholder="Contoh: 1 (untuk 1 menit)"
                    min="0.1" step="0.1"
                >
            </div>
            <div>
                <label for="segmentDurationInput" class="form-label">Durasi Per Segmen (detik):</label>
                <input
                    type="number"
                    id="segmentDurationInput"
                    class="form-input"
                    placeholder="Contoh: 8 (untuk 8 detik)"
                    min="1"
                >
            </div>
            <div>
                <label for="directorVideoStyleSelect" class="form-label">Gaya Video:</label>
                <select id="directorVideoStyleSelect" class="form-input">
                    <option value="Default">Pilih Gaya Video (Default)</option>
                    <option value="Cinematic">Sinematik</option>
                    <option value="Documentary">Dokumenter</option>
                    <option value="Vlog Style">Gaya Vlog</option>
                    <option value="Music Video">Video Musik</option>
                    <option value="Commercial">Komersial</option>
                    <option value="Abstract">Abstrak</option>
                </select>
            </div>
            <div class="md:col-span-3">
                <label for="scenarioSubjectInput" class="form-label">Subjek Utama Skenario:</label>
                <input
                    type="text"
                    id="scenarioSubjectInput"
                    class="form-input"
                    placeholder="Contoh: 'Perjalanan seorang seniman muda di kota besar'"
                >
            </div>
            <div class="md:col-span-3">
                <label for="plotOutlineInput" class="form-label">Alur Cerita Singkat:</label>
                <textarea
                    id="plotOutlineInput"
                    class="form-input"
                    placeholder="Contoh: 'Seniman berjuang di awal, menemukan inspirasi, mencapai kesuksesan, dan merayakan karya seni.'"
                    rows="3"
                ></textarea>
            </div>
            <div class="md:col-span-3">
                <label for="directorIdeaInput" class="form-label">Ide Tambahan Skenario (Opsional):</label>
                <textarea
                    id="directorIdeaInput"
                    class="form-input"
                    placeholder="Contoh: 'Gunakan transisi cepat di awal, slow motion di momen penting.'"
                    rows="3"
                ></textarea>
            </div>
            <div class="md:col-span-3">
                <label for="directorNegativePromptInput" class="form-label">Prompt Negatif Skenario (Opsional):</label>
                <textarea
                    id="directorNegativePromptInput"
                    class="form-input border-red-300 focus:ring-red-400"
                    placeholder="Contoh: 'Gambar buram, ekspresi sedih yang berlebihan, warna kusam'"
                    rows="3"
                ></textarea>
            </div>
        </div>

        <!-- Text Prompt Inputs (Initially Hidden) -->
        <div id="textPromptInputs" class="hidden p-6 bg-white rounded-xl text-gray-700 text-center border border-pink-200 shadow-md shadow-pink-50 tab-content-box">
            <p class="text-lg info-box-title font-semibold">Fitur "Teks" akan segera hadir! Nantikan pembaruan.</p>
            <p class="mt-2 text-sm info-box-text">Bagian ini akan membantu Anda menghasilkan prompt untuk berbagai jenis konten teks, seperti artikel, skrip, atau cerita.</p>
        </div>

        <!-- Gallery Tab Content (Initially Hidden) -->
        <div id="galleryInputs" class="hidden p-6 bg-white rounded-xl text-gray-700 text-center border border-purple-200 shadow-md shadow-purple-50 tab-content-box">
            <p class="text-lg info-box-title font-semibold">Fitur "Galeri" akan segera hadir! Nantikan pembaruan.</p>
            <p class="mt-2 text-sm info-box-text">Bagian ini akan memungkinkan Anda untuk menyimpan, mengelola, dan melihat prompt yang telah Anda buat.</p>
        </div>


        <div class="flex flex-wrap justify-center gap-4 button-group">
            <button
                id="brushButton"
                class="w-1/4 sm:w-auto p-3 bg-gray-200 text-gray-800 rounded-full shadow-md hover:shadow-lg transform transition duration-300 hover:scale-105 focus:outline-none focus:ring-4 focus:ring-gray-300 flex items-center justify-center"
            >
                <!-- Brush Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-paintbrush"><path d="M18.37 2.63L14.34 6.66a2 2 0 0 0-2.83 0l-2.66 2.66a2 2 0 0 0 0 2.83l.34.34a10 10 0 0 0 4.17 4.17l.34.34a2 2 0 0 0 2.83 0l2.66-2.66a2 2 0 0 0 0-2.83l-4.03-4.03a2 2 0 0 0-2.83 0l-1.77 1.77"/><path d="M19 15l1 1v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4l1-1"/><path d="M17 17l-1 1"/></svg>
            </button>
            <button id="randomButton" class="flex-1 button-secondary">
                💡 Acak
            </button>
            <button id="manualButton" class="flex-1 button-secondary">
                🚀 Buat Manual
            </button>
            <button id="generateAIButton" class="flex-1 button-primary">
                ✨ Buat dengan AI
            </button>
        </div>

        <!-- Tombol Fitur Baru -->
        <div class="flex flex-wrap justify-center gap-4 mt-8 button-group" id="featureButtons">
            <button id="improvePromptButton" class="button-feature bg-purple-600 focus:ring-purple-500">
                ✨ Tingkatkan Prompt
                <span id="improveLoading" class="hidden loading-spinner"></span>
            </button>
            <button id="suggestKeywordsButton" class="button-feature bg-orange-600 focus:ring-orange-500">
                ✨ Sarankan Kata Kunci
                <span id="keywordsLoading" class="hidden loading-spinner"></span>
            </button>
            <button id="generateDescriptionButton" class="button-feature bg-blue-600 focus:ring-blue-500">
                ✨ Hasilkan Deskripsi
                <span id="descriptionLoading" class="hidden loading-spinner"></span>
            </button>
            <button id="generateVariationsButton" class="button-feature bg-teal-600 focus:ring-teal-500">
                ✨ Buat Variasi Prompt
                <span id="variationsLoading" class="hidden loading-spinner"></span>
            </button>
            <button id="correctGrammarButton" class="button-feature bg-indigo-600 focus:ring-indigo-500">
                ✨ Perbaiki Gramatika/Ejaan
                <span id="grammarLoading" class="hidden loading-spinner"></span>
            </button>
            <button id="suggestColorPaletteButton" class="button-feature bg-rose-600 focus:ring-rose-500">
                ✨ Sarankan Palet Warna
                <span id="colorPaletteLoading" class="hidden loading-spinner"></span>
            </button>
            <!-- New button for suggesting related concepts -->
            <button id="suggestConceptsButton" class="button-feature bg-fuchsia-600 focus:ring-fuchsia-500">
                ✨ Sarankan Konsep Terkait
                <span id="conceptsLoading" class="hidden loading-spinner"></span>
            </button>
            <!-- New button for evaluating prompt -->
            <button id="evaluatePromptButton" class="button-feature bg-cyan-600 focus:ring-cyan-500">
                ✨ Evaluasi Prompt
                <span id="evaluateLoading" class="hidden loading-spinner"></span>
            </button>
        </div>

        <!-- Dropdown untuk Terjemahan -->
        <div class="flex flex-wrap justify-center gap-4 mt-8 button-group" id="translateButtonGroup">
            <div>
                <label for="translateLanguageSelect" class="form-label">Terjemahkan ke Bahasa:</label>
                <select id="translateLanguageSelect" class="form-input">
                    <option value="Default">Pilih Bahasa</option>
                    <option value="English">English</option>
                    <option value="Spanish">Español</option>
                    <option value="French">Français</option>
                    <option value="German">Deutsch</option>
                    <option value="Japanese">日本語</option>
                    <option value="Mandarin">简体中文</option>
                    <option value="Arabic">العربية</option>
                    <option value="Indonesian">Bahasa Indonesia</option>
                    <!-- Tambahkan bahasa lain sesuai kebutuhan -->
                </select>
            </div>
            <button id="translatePromptButton" class="button-feature bg-pink-600 focus:ring-pink-500">
                ✨ Terjemahkan Prompt
                <span id="translateLoading" class="hidden loading-spinner"></span>
            </button>
        </div>


        <!-- Area Hasil yang Ditingkatkan -->
        <div class="mt-10 result-container">

            <!-- Hasil Judul -->
            <div id="titleResultContainer" class="hidden">
                <label for="generatedTitle" class="result-label">Judul Konten:</label>
                <input
                    type="text"
                    id="generatedTitle"
                    class="result-input"
                    readonly
                >
                <button id="copyTitleButton" class="result-copy-button">
                    Salin Judul
                </button>
            </div>

            <!-- Hasil Prompt (Bahasa Inggris) -->
            <div id="englishPromptResultContainer" class="hidden">
                <label for="generatedEnglishPrompt" class="result-label">Prompt (Bahasa Inggris):</label>
                <textarea
                    id="generatedEnglishPrompt"
                    class="result-textarea"
                    readonly
                ></textarea>
                <button id="copyEnglishPromptButton" class="result-copy-button">
                    Salin Prompt Inggris
                </button>
            </div>

            <!-- Hasil Prompt (Bahasa Indonesia) -->
            <div id="indonesianPromptResultContainer" class="hidden">
                <label for="generatedIndonesianPrompt" class="result-label">Prompt (Bahasa Indonesia):</label>
                <textarea
                    id="generatedIndonesianPrompt"
                    class="result-textarea"
                    readonly
                ></textarea>
                <button id="copyIndonesianPromptButton" class="result-copy-button">
                    Salin Prompt Indonesia
                </button>
            </div>

            <!-- Kontainer Default untuk pesan awal/error -->
            <p id="resultText" class="text-gray-600 text-md text-center">Prompt yang dihasilkan akan muncul di sini.</p>
            <p id="errorMessage" class="text-red-600 text-center font-medium hidden"></p>

            <!-- Container untuk Kata Kunci yang Disarankan -->
            <div id="suggestedKeywordsContainer" class="mt-4 p-4 bg-white rounded-xl border border-yellow-300 shadow-md shadow-yellow-100 hidden">
                <p class="font-bold text-yellow-700 mb-2">Kata Kunci Tambahan Disarankan:</p>
                <textarea
                    id="suggestedKeywordsList"
                    class="result-textarea"
                    readonly
                    placeholder="Kata kunci yang disarankan akan muncul di sini, dipisahkan dengan koma."
                ></textarea>
                <button id="copyKeywordsButton" class="result-copy-button">
                    Salin Kata Kunci
                </button>
            </div>

            <!-- Container untuk Deskripsi Gambar -->
            <div id="descriptionResultContainer" class="mt-4 p-4 bg-white rounded-xl border border-indigo-300 shadow-md shadow-indigo-100 hidden">
                <p class="font-bold text-indigo-700 mb-2">Deskripsi Konten (untuk Adobe Stock):</p>
                <textarea
                    id="generatedDescription"
                    class="result-textarea"
                    readonly
                    placeholder="Deskripsi konten yang dihasilkan akan muncul di sini."
                ></textarea>
                <button id="copyDescriptionButton" class="result-copy-button">
                    Salin Deskripsi
                </button>
            </div>

            <!-- Container untuk Variasi Prompt -->
            <div id="variationsResultContainer" class="mt-4 p-4 bg-white rounded-xl border border-green-300 shadow-md shadow-green-100 hidden">
                <p class="font-bold text-green-700 mb-2">Variasi Prompt (Bahasa Inggris):</p>
                <textarea
                    id="generatedVariations"
                    class="result-textarea"
                    readonly
                    placeholder="Variasi prompt akan muncul di sini, dipisahkan per baris."
                ></textarea>
                <button id="copyVariationsButton" class="result-copy-button">
                    Salin Variasi
                </button>
            </div>

            <!-- Container untuk Terjemahan Prompt -->
            <div id="translatedPromptContainer" class="mt-4 p-4 bg-white rounded-xl border border-pink-300 shadow-md shadow-pink-100 hidden">
                <p class="font-bold text-pink-700 mb-2">Prompt Terjemahan (<span id="translatedLanguageName"></span>):</p>
                <textarea
                    id="translatedPromptTextarea"
                    class="result-textarea"
                    readonly
                    placeholder="Prompt yang diterjemahkan akan muncul di sini."
                ></textarea>
                <button id="copyTranslatedPromptButton" class="result-copy-button">
                    Salin Terjemahan
                </button>
            </div>

            <!-- Container untuk Palet Warna yang Disarankan -->
            <div id="colorPaletteContainer" class="mt-4 p-4 bg-white rounded-xl border border-purple-300 shadow-md shadow-purple-100 hidden">
                <p class="font-bold text-purple-700 mb-2">Palet Warna Disarankan:</p>
                <textarea
                    id="suggestedColorPaletteList"
                    class="result-textarea"
                    readonly
                    placeholder="Palet warna yang disarankan akan muncul di sini."
                ></textarea>
                <button id="copyColorPaletteButton" class="result-copy-button">
                    Salin Palet Warna
                </button>
            </div>

            <!-- Container for Suggested Concepts -->
            <div id="suggestedConceptsContainer" class="mt-4 p-4 bg-white rounded-xl border border-fuchsia-300 shadow-md shadow-fuchsia-100 hidden">
                <p class="font-bold text-fuchsia-700 mb-2">Konsep Terkait Disarankan:</p>
                <textarea
                    id="suggestedConceptsList"
                    class="result-textarea"
                    readonly
                    placeholder="Konsep terkait akan muncul di sini, dipisahkan per baris."
                ></textarea>
                <button id="copyConceptsButton" class="result-copy-button">
                    Salin Konsep
                </button>
            </div>

            <!-- Container for Scenario Prompts -->
            <div id="scenarioPromptsContainer" class="mt-4 p-4 bg-white rounded-xl border border-lime-300 shadow-md shadow-lime-100 hidden">
                <p class="font-bold text-lime-700 mb-2">Skenario Video Prompts:</p>
                <textarea
                    id="generatedScenarioPrompts"
                    class="result-textarea"
                    readonly
                    placeholder="Prompt skenario video akan muncul di sini, satu per segmen."
                ></textarea>
                <button id="copyScenarioPromptsButton" class="result-copy-button">
                    Salin Semua Prompt Skenario
                </button>
            </div>

            <!-- New: Container for Prompt Evaluation -->
            <div id="evaluationResultContainer" class="mt-4 p-4 bg-white rounded-xl border border-cyan-300 shadow-md shadow-cyan-100 hidden">
                <p class="font-bold text-cyan-700 mb-2">Evaluasi Prompt:</p>
                <textarea
                    id="generatedEvaluation"
                    class="result-textarea"
                    readonly
                    placeholder="Umpan balik evaluasi prompt akan muncul di sini."
                ></textarea>
                <button id="copyEvaluationButton" class="result-copy-button">
                    Salin Evaluasi
                </button>
            </div>
        </div>
    </div>

    <script type="module">
        // Fungsi untuk menginisialisasi aplikasi setelah DOM dimuat
        window.onload = function() {
            // Mendapatkan referensi elemen-elemen UI
            const tabButtons = document.querySelectorAll('.tab-button');
            const imagePromptInputsDiv = document.getElementById('imagePromptInputs');
            const videoPromptInputsDiv = document.getElementById('videoPromptInputs');
            const directorPromptInputsDiv = document.getElementById('directorPromptInputs');
            const textPromptInputsDiv = document.getElementById('textPromptInputs');
            const galleryInputsDiv = document.getElementById('galleryInputs'); // New gallery div
            const featureButtonsDiv = document.getElementById('featureButtons'); // Container untuk tombol fitur tambahan
            const translateButtonGroup = document.getElementById('translateButtonGroup'); // Grup tombol terjemahan

            const promptIdeaInput = document.getElementById('promptIdeaInput');
            const imageStyleSelect = document.getElementById('imageStyleSelect');
            const imageCategorySelect = document.getElementById('imageCategorySelect');
            const subjectInput = document.getElementById('subjectInput');
            const actionInput = document.getElementById('actionInput');
            const settingInput = document.getElementById('settingInput');
            const moodInput = document.getElementById('moodInput');
            const cameraAngleSelect = document.getElementById('cameraAngleSelect');
            const timeOfDaySelect = document.getElementById('timeOfDaySelect');

            // New Image Input fields
            const materialTextureInput = document.getElementById('materialTextureInput');
            const expressionEmotionInput = document.getElementById('expressionEmotionInput');
            const ageEraInput = document.getElementById('ageEraInput');
            const aspectRatioSelect = document.getElementById('aspectRatioSelect');
            const resolutionSelect = document.getElementById('resolutionSelect');
            const negativePromptInput = document.getElementById('negativePromptInput');

            // Video Input fields
            const videoSubjectInput = document.getElementById('videoSubjectInput');
            const videoActionInput = document.getElementById('videoActionInput');
            const videoSettingInput = document.getElementById('videoSettingInput');
            const videoMoodInput = document.getElementById('videoMoodInput');
            const videoDurationInput = document.getElementById('videoDurationInput');
            const cameraMovementSelect = document.getElementById('cameraMovementSelect');
            const videoStyleSelect = document.getElementById('videoStyleSelect'); 
            const dialogueLanguageInput = document.getElementById('dialogueLanguageInput');
            const dialogueTextInput = document.getElementById('dialogueTextInput');
            const videoIdeaInput = document.getElementById('videoIdeaInput');
            const videoNegativePromptInput = document.getElementById('videoNegativePromptInput');

            // Director Input fields
            const totalVideoDurationInput = document.getElementById('totalVideoDurationInput');
            const segmentDurationInput = document.getElementById('segmentDurationInput');
            const directorVideoStyleSelect = document.getElementById('directorVideoStyleSelect');
            const scenarioSubjectInput = document.getElementById('scenarioSubjectInput');
            const plotOutlineInput = document.getElementById('plotOutlineInput');
            const directorIdeaInput = document.getElementById('directorIdeaInput');
            const directorNegativePromptInput = document.getElementById('directorNegativePromptInput');


            const brushButton = document.getElementById('brushButton'); // New button reference
            const randomButton = document.getElementById('randomButton'); // New button reference
            const manualButton = document.getElementById('manualButton'); // New button reference
            const generateAIButton = document.getElementById('generateAIButton'); // Renamed from generateButton

            const improvePromptButton = document.getElementById('improvePromptButton');
            const suggestKeywordsButton = document.getElementById('suggestKeywordsButton');
            const generateDescriptionButton = document.getElementById('generateDescriptionButton');
            const generateVariationsButton = document.getElementById('generateVariationsButton');
            const correctGrammarButton = document.getElementById('correctGrammarButton');
            const translateLanguageSelect = document.getElementById('translateLanguageSelect');
            const translatePromptButton = document.getElementById('translatePromptButton');
            const suggestColorPaletteButton = document.getElementById('suggestColorPaletteButton');
            const suggestConceptsButton = document.getElementById('suggestConceptsButton');
            const evaluatePromptButton = document.getElementById('evaluatePromptButton'); // New button reference

            const buttonText = document.getElementById('buttonText'); // This is now for generateAIButton
            const loadingIndicator = document.getElementById('loadingIndicator'); // This is now for generateAIButton
            const improveLoading = document.getElementById('improveLoading');
            const keywordsLoading = document.getElementById('keywordsLoading');
            const descriptionLoading = document.getElementById('descriptionLoading');
            const variationsLoading = document.getElementById('variationsLoading');
            const grammarLoading = document.getElementById('grammarLoading');
            const translateLoading = document.getElementById('translateLoading');
            const colorPaletteLoading = document.getElementById('colorPaletteLoading');
            const conceptsLoading = document.getElementById('conceptsLoading');
            const evaluateLoading = document.getElementById('evaluateLoading'); // New loading indicator

            // Area Hasil
            const resultText = document.getElementById('resultText');
            const errorMessage = document.getElementById('errorMessage');

            // Elemen Hasil Judul
            const titleResultContainer = document.getElementById('titleResultContainer');
            const generatedTitle = document.getElementById('generatedTitle');
            const copyTitleButton = document.getElementById('copyTitleButton');
            const generatedTitleLabel = document.querySelector('label[for="generatedTitle"]');


            // Elemen Hasil Prompt Bahasa Inggris
            const englishPromptResultContainer = document.getElementById('englishPromptResultContainer');
            const generatedEnglishPrompt = document.getElementById('generatedEnglishPrompt');
            const copyEnglishPromptButton = document.getElementById('copyEnglishPromptButton');

            // Elemen Hasil Prompt Bahasa Indonesia
            const indonesianPromptResultContainer = document.getElementById('indonesianPromptResultContainer');
            const generatedIndonesianPrompt = document.getElementById('generatedIndonesianPrompt');
            const copyIndonesianPromptButton = document.getElementById('copyIndonesianPromptButton'); 

            // Elemen Hasil Kata Kunci
            const suggestedKeywordsContainer = document.getElementById('suggestedKeywordsContainer');
            const suggestedKeywordsList = document.getElementById('suggestedKeywordsList');
            const copyKeywordsButton = document.getElementById('copyKeywordsButton');

            // Elemen Hasil Deskripsi Gambar
            const descriptionResultContainer = document.getElementById('descriptionResultContainer');
            const generatedDescription = document.getElementById('generatedDescription');
            const copyDescriptionButton = document.getElementById('copyDescriptionButton');

            // Elemen Hasil Variasi Prompt
            const variationsResultContainer = document.getElementById('variationsResultContainer');
            const generatedVariations = document.getElementById('generatedVariations');
            const copyVariationsButton = document.getElementById('copyVariationsButton');

            // Elemen Hasil Terjemahan Prompt
            const translatedPromptContainer = document.getElementById('translatedPromptContainer');
            const translatedPromptTextarea = document.getElementById('translatedPromptTextarea');
            const translatedLanguageName = document.getElementById('translatedLanguageName');
            const copyTranslatedPromptButton = document.getElementById('copyTranslatedPromptButton');

            // Elemen Hasil Palet Warna
            const colorPaletteContainer = document.getElementById('colorPaletteContainer');
            const suggestedColorPaletteList = document.getElementById('suggestedColorPaletteList');
            const copyColorPaletteButton = document.getElementById('copyColorPaletteButton');

            // Elements for Suggested Concepts
            const suggestedConceptsContainer = document.getElementById('suggestedConceptsContainer');
            const suggestedConceptsList = document.getElementById('suggestedConceptsList');
            const copyConceptsButton = document.getElementById('copyConceptsButton');

            // Elements for Scenario Prompts
            const scenarioPromptsContainer = document.getElementById('scenarioPromptsContainer');
            const generatedScenarioPrompts = document.getElementById('generatedScenarioPrompts');
            const copyScenarioPromptsButton = document.getElementById('copyScenarioPromptsButton');

            // New: Elements for Prompt Evaluation
            const evaluationResultContainer = document.getElementById('evaluationResultContainer');
            const generatedEvaluation = document.getElementById('generatedEvaluation');
            const copyEvaluationButton = document.getElementById('copyEvaluationButton');


            // Fungsi utilitas untuk menampilkan pesan kesalahan
            function showErrorMessage(message) {
                errorMessage.textContent = message;
                errorMessage.classList.remove('hidden');
            }

            // Fungsi utilitas untuk menyembunyikan semua area hasil kecuali pesan default
            function resetResultArea() {
                titleResultContainer.classList.add('hidden');
                englishPromptResultContainer.classList.add('hidden');
                indonesianPromptResultContainer.classList.add('hidden');
                suggestedKeywordsContainer.classList.add('hidden');
                descriptionResultContainer.classList.add('hidden');
                variationsResultContainer.classList.add('hidden');
                translatedPromptContainer.classList.add('hidden');
                colorPaletteContainer.classList.add('hidden');
                suggestedConceptsContainer.classList.add('hidden');
                scenarioPromptsContainer.classList.add('hidden');
                evaluationResultContainer.classList.add('hidden'); // New: Hide evaluation container

                resultText.textContent = 'Prompt yang dihasilkan akan muncul di sini.';
                resultText.classList.remove('hidden');
                errorMessage.classList.add('hidden');
                generatedTitle.value = '';
                generatedEnglishPrompt.value = '';
                generatedIndonesianPrompt.value = '';
                suggestedKeywordsList.value = '';
                generatedDescription.value = '';
                generatedVariations.value = '';
                translatedPromptTextarea.value = '';
                translatedLanguageName.textContent = '';
                suggestedColorPaletteList.value = '';
                suggestedConceptsList.value = '';
                generatedScenarioPrompts.value = '';
                generatedEvaluation.value = ''; // New: Clear evaluation result
            }

            // Fungsi utilitas untuk mengelola status tombol dan loading
            function setButtonState(button, textSpan, loadingSpan, disabled) {
                if (button && textSpan && loadingSpan) { // Tambahkan null check untuk elemen
                    button.disabled = disabled;
                    if (disabled) {
                        textSpan.textContent = 'Memproses...';
                        loadingSpan.classList.remove('hidden');
                    } else {
                        // Restore original text based on button ID
                        if (button.id === 'generateAIButton') textSpan.textContent = 'Buat dengan AI';
                        else if (button.id === 'improvePromptButton') textSpan.textContent = '✨ Tingkatkan Prompt';
                        else if (button.id === 'suggestKeywordsButton') textSpan.textContent = '✨ Sarankan Kata Kunci';
                        else if (button.id === 'generateDescriptionButton') textSpan.textContent = '✨ Hasilkan Deskripsi';
                        else if (button.id === 'generateVariationsButton') textSpan.textContent = '✨ Buat Variasi Prompt';
                        else if (button.id === 'correctGrammarButton') textSpan.textContent = '✨ Perbaiki Gramatika/Ejaan';
                        else if (button.id === 'translatePromptButton') textSpan.textContent = '✨ Terjemahkan Prompt';
                        else if (button.id === 'suggestColorPaletteButton') textSpan.textContent = '✨ Sarankan Palet Warna';
                        else if (button.id === 'suggestConceptsButton') textSpan.textContent = '✨ Sarankan Konsep Terkait';
                        else if (button.id === 'evaluatePromptButton') textSpan.textContent = '✨ Evaluasi Prompt'; // New button text
                        loadingSpan.classList.add('hidden');
                    }
                } else {
                    console.warn(`Attempted to set state for a null button element. ID: ${button ? button.id : 'N/A'}`);
                }
            }

            // Fungsi untuk mengaktifkan/menonaktifkan tombol fitur tambahan
            function toggleFeatureButtons(enable) {
                const buttons = [
                    improvePromptButton, suggestKeywordsButton, generateDescriptionButton,
                    generateVariationsButton, correctGrammarButton, suggestColorPaletteButton,
                    translatePromptButton, suggestConceptsButton, evaluatePromptButton // New: Add evaluate button
                ];
                buttons.forEach(button => {
                    if (button) { // Pastikan tombol ada sebelum mengubah propertinya
                        button.disabled = !enable;
                        button.classList.toggle('opacity-50', !enable); // Tambahkan efek visual disabled
                        button.classList.toggle('cursor-not-allowed', !enable);
                    }
                });
                // Juga nonaktifkan dropdown terjemahan jika fitur dinonaktifkan
                if (translateLanguageSelect) {
                    translateLanguageSelect.disabled = !enable;
                    translateLanguageSelect.classList.toggle('opacity-50', !enable);
                    translateLanguageSelect.classList.toggle('cursor-not-allowed', !enable);
                }
            }

            // Fungsi utama untuk memanggil Gemini API
            async function callGeminiAPI(promptContent, buttonElement, textSpanElement, loadingSpanElement) {
                setButtonState(buttonElement, textSpanElement, loadingSpanElement, true);
                // Nonaktifkan semua tombol kontrol utama saat API dipanggil
                if (brushButton) brushButton.disabled = true;
                if (randomButton) randomButton.disabled = true;
                if (manualButton) manualButton.disabled = true;
                if (generateAIButton) generateAIButton.disabled = true; // Ensure generateAIButton is disabled
                toggleFeatureButtons(false); // Nonaktifkan tombol fitur tambahan

                errorMessage.classList.add('hidden');

                try {
                    let chatHistory = [];
                    // Crucial: Explicitly instruct the AI to ONLY output the content within the specified tags.
                    chatHistory.push({ role: "user", parts: [{ text: `Output ONLY the content within the specified XML-like tags. Do NOT include any conversational text, introductions, explanations, or markdown outside of these tags.

${promptContent}` }] });
                    const payload = { contents: chatHistory };
                    // API Key Anda dimasukkan di sini
                    const apiKey = ""; // Leave empty for Canvas to inject at runtime
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(`Kesalahan API: ${errorData.error.message || response.statusText}`);
                    }

                    const result = await response.json();
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        return result.candidates[0].content.parts[0].text;
                    } else {
                        throw new Error('Respons API tidak valid atau kosong.');
                    }
                } catch (error) {
                    console.error('Kesalahan API:', error);
                    showErrorMessage(`Terjadi kesalahan: ${error.message}. Coba lagi nanti.`);
                    return null;
                } finally {
                    setButtonState(buttonElement, textSpanElement, loadingSpanElement, false);
                    // Aktifkan kembali tombol kontrol utama setelah selesai
                    if (brushButton) brushButton.disabled = false;
                    if (randomButton) randomButton.disabled = false;
                    if (manualButton) manualButton.disabled = false;
                    if (generateAIButton) generateAIButton.disabled = false; // Ensure generateAIButton is re-enabled

                    // Aktifkan tombol fitur tambahan hanya jika tab gambar aktif
                    const currentActiveTab = document.querySelector('.tab-button.active').dataset.tab;
                    if (currentActiveTab === 'image') {
                        toggleFeatureButtons(true);
                    }
                }
            }

            // Helper function to get detailed style description for AI
            function getStyleDescription(selectedStyle) {
                switch (selectedStyle) {
                    case "Fotorealistik":
                        return "Hyperrealism, Ultra-HD, highly detailed, sharp focus, capturing minute textures and natural lighting, resembling professional photography, often with a cinematic quality.";
                    case "Animasi 3D":
                        return "Bright, vibrant, smooth rendering, character-focused, reminiscent of modern 3D animated movies (e.g., Pixar, Disney, DreamWorks), stylized but with detailed models and expressive facial features.";
                    case "Seni Digital":
                        return "Expressive brushstrokes, rich textures, imaginative, often fantastical or conceptual, resembling high-quality digital paintings or concept art, can range from painterly to graphic.";
                    case "Ilustrasi Cat Air":
                        return "Soft blends, translucent colors, fluid, organic feel, visible brush strokes, hand-painted aesthetic, dreamy and ethereal quality, often with diffused edges.";
                    case "Vektor Minimalis":
                        return "Flat design, clean lines, geometric shapes, bold and limited color palette, simple and crisp, highly scalable, often abstract or symbolic, modern, graphic.";
                    case "Retro/Vintage":
                        return "Nostalgic, warm and desaturated color palette, grainy texture, often with a distressed or aged feel, reminiscent of old photographs, advertisements, or pulp art from a specific era (e.g., 50s, 60s, 70s, 80s).";
                    case "Fantasi Gelap":
                        return "Gritty, epic, often grim or eerie atmosphere, detailed creatures or characters, dramatic and high-contrast lighting, rich and dark textures, intense and immersive, suitable for mythical or dystopian themes.";
                    case "Cyborg/Sci-Fi":
                        return "Futuristic, sleek, metallic, often with neon lights and holographic elements, advanced technological implants, robotic or augmented human features, high-tech, modern, can be utopian or dystopian.";
                    default:
                        return "Detailed, high quality, professional.";
                }
            }

            // Function to toggle input visibility based on prompt type
            function togglePromptInputs(selectedTab) {
                // Remove active class from all tabs
                tabButtons.forEach(button => button.classList.remove('active'));
                // Add active class to the selected tab
                const activeTabButton = document.querySelector(`.tab-button[data-tab="${selectedTab}"]`);
                if (activeTabButton) {
                    activeTabButton.classList.add('active');
                }

                // Hide all input sections
                imagePromptInputsDiv.classList.add('hidden');
                videoPromptInputsDiv.classList.add('hidden');
                directorPromptInputsDiv.classList.add('hidden');
                textPromptInputsDiv.classList.add('hidden');
                galleryInputsDiv.classList.add('hidden'); // Hide gallery tab content

                // Show/hide feature buttons and translate group based on tab
                if (selectedTab === 'image') {
                    featureButtonsDiv.classList.remove('hidden');
                    translateButtonGroup.classList.remove('hidden');
                    toggleFeatureButtons(true); // Ensure buttons are enabled
                } else {
                    featureButtonsDiv.classList.add('hidden');
                    translateButtonGroup.classList.add('hidden');
                    toggleFeatureButtons(false); // Ensure buttons are disabled
                }


                // Show the selected input section and apply specific box styling
                imagePromptInputsDiv.classList.remove('tab-content-box');
                videoPromptInputsDiv.classList.remove('tab-content-box');
                directorPromptInputsDiv.classList.remove('tab-content-box');
                textPromptInputsDiv.classList.remove('tab-content-box');
                galleryInputsDiv.classList.remove('tab-content-box');


                if (selectedTab === 'image') {
                    imagePromptInputsDiv.classList.remove('hidden');
                    imagePromptInputsDiv.classList.add('tab-content-box');
                    generatedTitleLabel.textContent = 'Judul Gambar:';
                } else if (selectedTab === 'video') {
                    videoPromptInputsDiv.classList.remove('hidden');
                    videoPromptInputsDiv.classList.add('tab-content-box');
                    generatedTitleLabel.textContent = 'Judul Video:';
                } else if (selectedTab === 'director') {
                    directorPromptInputsDiv.classList.remove('hidden');
                    directorPromptInputsDiv.classList.add('tab-content-box');
                    generatedTitleLabel.textContent = 'Judul Skenario Video:'; // Specific label for Director
                } else if (selectedTab === 'text') {
                    textPromptInputsDiv.classList.remove('hidden');
                    textPromptInputsDiv.classList.add('tab-content-box');
                    generatedTitleLabel.textContent = 'Judul Konten:'; // Generic for now
                } else if (selectedTab === 'gallery') {
                    galleryInputsDiv.classList.remove('hidden');
                    galleryInputsDiv.classList.add('tab-content-box');
                    generatedTitleLabel.textContent = 'Judul Konten:'; // Generic for now
                }
                resetResultArea(); // Clear results when switching type
            }

            // Add event listeners for tab buttons
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const selectedTab = button.dataset.tab;
                    togglePromptInputs(selectedTab);
                });
            });

            // --- Event Listener untuk Tombol Hasilkan Prompt ---
            if (generateAIButton) { // Renamed from generateButton
                generateAIButton.addEventListener('click', async () => {
                    const selectedType = document.querySelector('.tab-button.active').dataset.tab;
                    let promptForAI = "";
                    let isInputValid = false;

                    resetResultArea();
                    resultText.textContent = 'Menghasilkan prompt, harap tunggu...';

                    if (selectedType === 'image') {
                        const selectedStyle = imageStyleSelect.value;
                        const selectedCategory = imageCategorySelect.value;
                        const subject = subjectInput.value.trim();
                        const action = actionInput.value.trim();
                        const setting = settingInput.value.trim();
                        const mood = moodInput.value.trim();
                        const cameraAngle = cameraAngleSelect.value;
                        const timeOfDay = timeOfDaySelect.value;
                        const idea = promptIdeaInput.value.trim();
                        const materialTexture = materialTextureInput.value.trim();
                        const expressionEmotion = expressionEmotionInput.value.trim();
                        const ageEra = ageEraInput.value.trim();
                        const aspectRatio = aspectRatioSelect.value;
                        const resolution = resolutionSelect.value;
                        const negativePrompt = negativePromptInput.value.trim();

                        if (!idea && !subject && !action && !setting && !mood) {
                            showErrorMessage('Harap masukkan ide gambar atau isi setidaknya satu bidang terstruktur untuk prompt gambar!');
                            return;
                        }
                        isInputValid = true;

                        const styleDescription = getStyleDescription(selectedStyle);

                        promptForAI = `
<TITLE_GENERATED>
[Judul yang Dihasilkan di Sini]
</TITLE_GENERATED>

<PROMPT_ENGLISH>
## Commercial Image Prompt (English)
**SECTION: Subject and Action**
* **Subject:** ${subject || 'Elaborate on subject based on category and additional ideas, add specific visual details.'}
* **Action:** ${action || 'Elaborate on action, add expressive details.'}

**SECTION: Setting and Ambiance**
* **Setting:** ${setting || 'Elaborate on setting, describe background, architectural, or natural elements.'}
* **Ambiance:** ${mood || 'Elaborate on mood/emotions, add sensory elements if relevant.'}

**SECTION: Subject Details (Expanded)**
* ${materialTexture ? `**Material/Texture:** ${materialTexture}.` : ''}
* ${expressionEmotion ? `**Expression/Emotion:** ${expressionEmotion}.` : ''}
* ${ageEra ? `**Age/Era:** ${ageEra}.` : ''}
* ${idea ? `**Additional Ideas:** ${idea}.` : ''}

**SECTION: Style and Technical Details**
* **Image Style:** ${selectedStyle}
* **Category:** ${selectedCategory !== "Default" ? selectedCategory : 'General'}
* **Photorealistic/Art Style:** ${styleDescription}
* **Lighting:** ${timeOfDay !== "Default" ? timeOfDay + ' lighting, elaborate on light effects, shadows, or light sources.' : 'Elaborate on lighting effects, shadows, or light sources.'}
* **Composition:** ${cameraAngle !== "Default" ? cameraAngle + ', include information on focus (e.g., shallow depth of field, sharp focus), framing, or rule of thirds.' : 'Include information on focus (e.g., shallow depth of field, sharp focus), framing, or rule of thirds.'}
* **Aspect Ratio:** ${aspectRatio !== "Default" ? aspectRatio : 'Standard'}
* **Resolution & Quality:** ${resolution !== "Default" ? resolution + ', ' : ''}Ultra-High Resolution (8K+), Cinematic Quality, Sharp Focus, professional studio photography quality.

**SECTION: Color Palette**
* [Suggest a color palette suitable for the style, mood, and subject. Give specific color examples if possible.]

**SECTION: Emotional Tone:** ${mood || 'Elaborate on emotional nuances.'}

**SECTION: Negative Prompt (What NOT to include)**
* ${negativePrompt || 'None'}

</PROMPT_ENGLISH>

<PROMPT_INDONESIAN>
## Prompt Gambar Komersial (Bahasa Indonesia)
**BAGIAN: Subjek dan Aksi**
* **Subjek:** ${subject || 'Isi dengan detail subjek berdasarkan kategori dan ide tambahan, tambahkan detail visual spesifik.'}
* **Aksi:** ${action || 'Isi dengan detail aksi dan kembangkan lebih lanjut, tambahkan detail ekspresif yang sesuai dengan subjek dan gaya.'}

**BAGIAN: Pengaturan dan Suasana**
* **Pengaturan:** ${setting || 'Isi dengan detail dari input "Pengaturan" dan kembangkan lebih lanjut, deskripsikan latar belakang, elemen arsitektur, atau alam.'}
* **Suasana:** ${mood || 'Isi dengan detail dari input "Suasana/Emosi" dan kembangkan lebih lanjut, tambahkan elemen sensorik (bau, suara) jika relevan.'}

**BAGIAN: Detail Subjek (Diperluas)**
* ${materialTexture ? `**Bahan/Tekstur:** ${materialTexture}.` : ''}
* ${expressionEmotion ? `**Ekspresi/Emosi:** ${expressionEmotion}.` : ''}
* ${ageEra ? `**Usia/Era:** ${ageEra}.` : ''}
* ${idea ? `**Ide Tambahan:** ${idea}.` : ''}

**BAGIAN: Gaya dan Detail Teknis**
* **Gaya Gambar:** ${selectedStyle}
* **Kategori:** ${selectedCategory !== "Default" ? selectedCategory : 'Umum'}
* **Gaya Fotorealistik/Seni:** ${styleDescription}
* **Pencahayaan:** ${timeOfDay !== "Default" ? timeOfDay + ' pencahayaan, kembangkan efek cahaya, bayangan, atau sumber cahaya.' : 'Kembangkan efek pencahayaan, bayangan, atau sumber cahaya.'}
* **Komposisi:** ${cameraAngle !== "Default" ? cameraAngle + ', sertakan informasi tentang fokus (misalnya, shallow depth of field, sharp focus), framing, atau rule of thirds.' : 'Sertakan informasi tentang fokus (misalnya, shallow depth of field, sharp focus), framing, atau rule of thirds.'}
* **Rasio Aspek:** ${aspectRatio !== "Default" ? aspectRatio : 'Standar'}
* **Resolusi & Kualitas:** ${resolution !== "Default" ? resolution + ', ' : ''}Resolusi Ultra-Tinggi (8K+), Kualitas Sinematik, Fokus Tajam, kualitas fotografi studio profesional.

**BAGIAN: Palet Warna**
* [Sarankan palet warna yang sesuai dengan gaya, suasana, dan subjek. Berikan contoh warna spesifik jika memungkinkan.]

**BAGIAN: Nada Emosional:** ${mood || 'Isi dengan detail dari input "Suasana/Emosi" dan kembangkan, tambahkan nuansa emosional yang kuat.'}

**BAGIAN: Prompt Negatif (Apa yang TIDAK boleh disertakan)**
* ${negativePrompt || 'Tidak ada'}

</PROMPT_INDONESIAN>
`;
                    } else if (selectedType === 'video') {
                        const videoSubject = videoSubjectInput.value.trim();
                        const videoAction = videoActionInput.value.trim();
                        const videoSetting = videoSettingInput.value.trim();
                        const videoMood = videoMoodInput.value.trim();
                        const videoDuration = videoDurationInput.value.trim();
                        const cameraMovement = cameraMovementSelect.value;
                        const videoStyle = videoStyleSelect.value;
                        const dialogueLanguage = dialogueLanguageInput.value.trim();
                        const dialogueText = dialogueTextInput.value.trim();
                        const videoIdea = videoIdeaInput.value.trim();
                        const videoNegativePrompt = videoNegativePromptInput.value.trim();

                        if (!videoIdea && !videoSubject && !videoAction && !videoSetting && !videoMood) {
                            showErrorMessage('Harap masukkan ide video atau isi setidaknya satu bidang terstruktur untuk prompt video!');
                            return;
                        }
                        isInputValid = true;

                        promptForAI = `
<TITLE_GENERATED>
[Judul Video yang Dihasilkan di Sini]
</TITLE_GENERATED>

<PROMPT_ENGLISH>
## Commercial Video Prompt (English)
**SECTION: Subject and Action**
* **Subject:** ${videoSubject || 'Elaborate on video subject, add specific visual details.'}
* **Action:** ${videoAction || 'Elaborate on video action, describe movement or events.'}

**SECTION: Setting and Ambiance**
* **Setting:** ${videoSetting || 'Elaborate on video setting, describe background elements.'}
* **Ambiance:** ${videoMood || 'Elaborate on video mood/emotions, add sensory elements.'}

**SECTION: Video Details**
* **Duration:** ${videoDuration ? `${videoDuration} seconds` : 'Suggest appropriate duration.'}
* **Camera Movement:** ${cameraMovement !== "Default" ? cameraMovement : 'Suggest dynamic camera movements (e.g., slow pan, drone shot, handheld).'}
* **Video Style:** ${videoStyle !== "Default" ? videoStyle : 'Cinematic, High Quality, Professional Grade.'}
* ${dialogueLanguage ? `**Dialogue Language:** ${dialogueLanguage}.` : ''}
* ${dialogueText ? `**Dialogue Text:** "${dialogueText}".` : ''}
* ${videoIdea ? `**Additional Ideas:** ${videoIdea}.` : ''}

**SECTION: Technical Details**
* **Resolution & Quality:** 4K UHD, Smooth Motion, Sharp Focus.

**SECTION: Negative Prompt (What NOT to include)**
* ${videoNegativePrompt || 'None'}

</PROMPT_ENGLISH>

<PROMPT_INDONESIAN>
## Prompt Video Komersial (Bahasa Indonesia)
**BAGIAN: Subjek dan Aksi**
* **Subjek:** ${videoSubject || 'Kembangkan subjek video, tambahkan detail visual spesifik.'}
* **Aksi:** ${videoAction || 'Kembangkan aksi video, jelaskan gerakan atau peristiwa.'}

**BAGIAN: Pengaturan dan Suasana**
* **Pengaturan:** ${videoSetting || 'Kembangkan pengaturan video, deskripsikan elemen latar belakang.'}
* **Suasana:** ${videoMood || 'Kembangkan suasana/emosi video, tambahkan elemen sensorik.'}

**BAGIAN: Detail Video**
* **Durasi:** ${videoDuration ? `${videoDuration} detik` : 'Sarankan durasi yang sesuai.'}
* **Pergerakan Kamera:** ${cameraMovement !== "Default" ? cameraMovement : 'Sarankan pergerakan kamera yang dinamis (misalnya, pan lambat, bidikan drone, genggam).'}
* **Gaya Video:** ${videoStyle !== "Default" ? videoStyle : 'Sinematik, Kualitas Tinggi, Tingkat Profesional.'}
* ${dialogueLanguage ? `**Bahasa Dialog:** ${dialogueLanguage}.` : ''}
* ${dialogueText ? `**Teks Dialog:** "${dialogueText}".` : ''}
* ${videoIdea ? `**Ide Tambahan:** ${videoIdea}.` : ''}

**BAGIAN: Detail Teknis**
* **Resolusi & Kualitas:** 4K UHD, Gerakan Halus, Fokus Tajam.

**BAGIAN: Prompt Negatif (Apa yang TIDAK boleh disertakan)**
* ${videoNegativePrompt || 'Tidak ada'}

</PROMPT_INDONESIAN>
`;
                    } else if (selectedType === 'director') {
                        const totalVideoDuration = parseFloat(totalVideoDurationInput.value);
                        const segmentDuration = parseFloat(segmentDurationInput.value);
                        const directorVideoStyle = directorVideoStyleSelect.value;
                        const scenarioSubject = scenarioSubjectInput.value.trim();
                        const plotOutline = plotOutlineInput.value.trim();
                        const directorIdea = directorIdeaInput.value.trim();
                        const directorNegativePrompt = directorNegativePromptInput.value.trim();

                        if (!scenarioSubject || !plotOutline || isNaN(totalVideoDuration) || isNaN(segmentDuration) || totalVideoDuration <= 0 || segmentDuration <= 0) {
                            showErrorMessage('Harap isi semua bidang wajib (Subjek, Alur Cerita, Durasi Total, Durasi Per Segmen) untuk skenario video!');
                            return;
                        }

                        const totalSeconds = totalVideoDuration * 60;
                        const numberOfSegments = Math.ceil(totalSeconds / segmentDuration);

                        isInputValid = true;

                        promptForAI = `
<TITLE_GENERATED>
[Judul Skenario Video: ${scenarioSubject}]
</TITLE_GENERATED>

<PROMPT_ENGLISH>
## Commercial Video Scenario Prompts (English)
Create a detailed video scenario broken into ${numberOfSegments} segments, each approximately ${segmentDuration} seconds long, for a total video duration of ${totalVideoDuration} minutes.

**Overall Concept:**
* **Main Subject:** ${scenarioSubject}
* **Plot Outline:** ${plotOutline}
* **Video Style:** ${directorVideoStyle !== "Default" ? directorVideoStyle : 'Professional, Dynamic'}
* **Additional Scenario Ideas:** ${directorIdea || 'None'}

**Instructions for each segment prompt:**
* Provide a clear and concise description for each segment.
* Include suggestions for: Subject, Action, Setting, Mood, Camera Movement, Dialogue Language, Dialogue Text (if any), and Negative Prompt.
* Ensure smooth transitions and a cohesive narrative flow across all segments.
* Each segment prompt should be self-contained and ready for a video generation model.

---
`;
                        for (let i = 1; i <= numberOfSegments; i++) {
                            promptForAI += `
**SEGMENT ${i} (approx. ${segmentDuration} seconds):**
* **Subject:** [Describe subject for this segment]
* **Action:** [Describe action for this segment]
* **Setting:** [Describe setting for this segment]
* **Mood:** [Describe mood for this segment]
* **Camera Movement:** [Suggest camera movement for this segment]
* **Dialogue Language:** [e.g., English, Indonesian, None]
* **Dialogue Text:** "[Specific dialogue or narration for this segment]"
* **Negative Prompt:** [What to avoid for this segment]
---
`;
                        }
                        promptForAI += `
</PROMPT_ENGLISH>

<PROMPT_INDONESIAN>
## Prompt Skenario Video Komersial (Bahasa Indonesia)
Buat skenario video terperinci yang dipecah menjadi ${numberOfSegments} segmen, masing-masing sekitar ${segmentDuration} detik, untuk durasi video total ${totalVideoDuration} menit.

**Konsep Keseluruhan:**
* **Subjek Utama:** ${scenarioSubject}
* **Alur Cerita:** ${plotOutline}
* **Gaya Video:** ${directorVideoStyle !== "Default" ? directorVideoStyle : 'Profesional, Dinamis'}
* **Ide Tambahan Skenario:** ${directorIdea || 'Tidak ada'}

**Instruksi untuk setiap prompt segmen:**
* Berikan deskripsi yang jelas dan ringkas untuk setiap segmen.
* Sertakan saran untuk: Subjek, Aksi, Pengaturan, Suasana, Pergerakan Kamera, Bahasa Dialog, Teks Dialog (jika ada), dan Prompt Negatif.
* Pastikan transisi yang mulus dan alur naratif yang kohesif di semua segmen.
* Setiap prompt segmen harus mandiri dan siap untuk model pembuatan video.

---
`;
                        for (let i = 1; i <= numberOfSegments; i++) {
                            promptForAI += `
**SEGMEN ${i} (sekitar ${segmentDuration} detik):**
* **Subjek:** [Jelaskan subjek untuk segmen ini]
* **Aksi:** [Jelaskan aksi untuk segmen ini]
* **Pengaturan:** [Jelaskan pengaturan untuk segmen ini]
* **Suasana:** [Jelaskan suasana untuk segmen ini]
* **Pergerakan Kamera:** [Sarankan pergerakan kamera untuk segmen ini]
* **Bahasa Dialog:** [misalnya, Inggris, Indonesia, Tanpa dialog]
* **Teks Dialog:** "[Teks dialog atau narasi spesifik untuk segmen ini]"
* **Prompt Negatif:** [Apa yang harus dihindari untuk segmen ini]
---
`;
                        }
                        promptForAI += `
</PROMPT_INDONESIAN>
`;
                    } else if (selectedType === 'text') {
                        isInputValid = true; // No specific inputs to validate for these tabs yet
                        const contentType = selectedType === 'director' ? 'Skenario Video Kompleks/Arahan' : 'Konten Teks';
                        promptForAI = `
<TITLE_GENERATED>
[Judul ${contentType} yang Dihasilkan di Sini]
</TITLE_GENERATED>

<PROMPT_ENGLISH>
## Commercial Prompt (English) - ${contentType}
This section is for generating detailed prompts for ${contentType.toLowerCase()}. Content coming soon!
</PROMPT_ENGLISH>

<PROMPT_INDONESIAN>
## Prompt Komersial (Bahasa Indonesia) - ${contentType}
Bagian ini adalah untuk menghasilkan prompt detail untuk ${contentType.toLowerCase()}. Konten akan segera hadir!
</PROPROMPT_INDONESIAN>
`;
                    } else if (selectedType === 'gallery') {
                        isInputValid = true; // No specific inputs for gallery tab
                        promptForAI = `
<TITLE_GENERATED>
[Judul Galeri]
</TITLE_GENERATED>

<PROMPT_ENGLISH>
## Gallery Section (English)
This section is for displaying saved and generated prompts. Content coming soon!
</PROMPT_ENGLISH>

<PROMPT_INDONESIAN>
## Bagian Galeri (Bahasa Indonesia)
Bagian ini adalah untuk menampilkan prompt yang disimpan dan dihasilkan. Konten akan segera hadir!
</PROMPT_INDONESIAN>
`;
                    }

                    if (isInputValid) {
                        const fullResponse = await callGeminiAPI(promptForAI, generateAIButton, buttonText, loadingIndicator); // Use generateAIButton

                        if (fullResponse) {
                            // Parsing respons menggunakan tag khusus
                            const titleMatch = fullResponse.match(/<TITLE_GENERATED>([\s\S]*?)<\/TITLE_GENERATED>/);
                            const englishPromptMatch = fullResponse.match(/<PROMPT_ENGLISH>([\s\S]*?)<\/PROMPT_ENGLISH>/);
                            const indonesianPromptMatch = fullResponse.match(/<PROMPT_INDONESIAN>([\s\S]*?)<\/PROMPT_INDONESIAN>/);

                            if (titleMatch && englishPromptMatch && indonesianPromptMatch) {
                                generatedTitle.value = titleMatch[1].trim();
                                generatedEnglishPrompt.value = englishPromptMatch[1].trim();
                                generatedIndonesianPrompt.value = indonesianPromptMatch[1].trim();

                                titleResultContainer.classList.remove('hidden');
                                englishPromptResultContainer.classList.remove('hidden');
                                indonesianPromptResultContainer.classList.remove('hidden');
                                resultText.classList.add('hidden'); // Sembunyikan teks "menghasilkan prompt"
                                errorMessage.classList.add('hidden'); // Sembunyikan pesan error jika sebelumnya ada

                                // Show scenario prompts container if director tab is active
                                if (selectedType === 'director') {
                                    scenarioPromptsContainer.classList.remove('hidden');
                                    generatedScenarioPrompts.value = indonesianPromptMatch[1].trim(); // Display the full segmented prompt
                                }

                            } else {
                                showErrorMessage('Gagal memparsing respons dari AI. Format tidak sesuai.');
                            }
                        }
                    }
                });
            } else { console.warn('generateAIButton not found!'); } // Updated console.warn

            // --- Event Listener untuk Tombol Tingkatkan Prompt ---
            if (improvePromptButton) { // Tambahkan null check
                improvePromptButton.addEventListener('click', async () => {
                    const currentEnglishPrompt = generatedEnglishPrompt.value.trim();
                    if (!currentEnglishPrompt) {
                        showErrorMessage('Hasilkan prompt bahasa Inggris terlebih dahulu untuk ditingkatkan!');
                        return;
                    }

                    resetResultArea(); // Reset area hasil untuk menampilkan hasil peningkatan
                    resultText.textContent = 'Meningkatkan prompt, harap tunggu...'; // Pesan loading langsung

                    const improvePromptRequest = `
<TITLE_GENERATED>
[Judul yang Dihasilkan di Sini]
</TITLE_GENERATED>

<PROMPT_ENGLISH>
## Commercial Prompt (English) - Improved Version
[Improved English Prompt Here]
</PROMPT_ENGLISH>

<PROMPT_INDONESIAN>
## Prompt Komersial (Bahasa Indonesia) - Versi Ditingkatkan
[Improved Indonesian Prompt Here]
</PROMPT_INDONESIAN>

Improve the following prompt to make it more detailed, artistic, and optimal for commercial use (e.g., for Adobe Stock). Add more sensory details, texture descriptions, or emotional nuances. After improving it, also provide its Indonesian translated version and a new, engaging, and relevant title. This prompt can be for either an image or a video.

Prompt to improve:
${currentEnglishPrompt}
`;
                    const fullResponse = await callGeminiAPI(improvePromptRequest, improvePromptButton, improvePromptButton.querySelector('span:not(.loading-spinner)'), improveLoading);

                    if (fullResponse) {
                        const titleMatch = fullResponse.match(/<TITLE_GENERATED>([\s\S]*?)<\/TITLE_GENERATED>/);
                        const englishPromptMatch = fullResponse.match(/<PROMPT_ENGLISH>([\s\S]*?)<\/PROMPT_ENGLISH>/);
                        const indonesianPromptMatch = fullResponse.match(/<PROMPT_INDONESIAN>([\s\S]*?)<\/PROMPT_INDONESIAN>/);

                        if (titleMatch && englishPromptMatch && indonesianPromptMatch) {
                            generatedTitle.value = titleMatch[1].trim();
                            generatedEnglishPrompt.value = englishPromptMatch[1].trim();
                            generatedIndonesianPrompt.value = indonesianPromptMatch[1].trim();

                            titleResultContainer.classList.remove('hidden');
                            englishPromptResultContainer.classList.remove('hidden');
                            indonesianPromptResultContainer.classList.remove('hidden');
                            resultText.classList.add('hidden');
                            errorMessage.classList.add('hidden');
                        } else {
                            showErrorMessage('Gagal memparsing respons peningkatan dari AI. Format tidak sesuai.');
                        }
                    }
                });
            } else { console.warn('improvePromptButton not found!'); }

            // --- Event Listener untuk Tombol Sarankan Kata Kunci ---
            if (suggestKeywordsButton) { // Tambahkan null check
                suggestKeywordsButton.addEventListener('click', async () => {
                    const currentEnglishPrompt = generatedEnglishPrompt.value.trim();
                    if (!currentEnglishPrompt) {
                        showErrorMessage('Hasilkan prompt bahasa Inggris terlebih dahulu untuk mendapatkan saran kata kunci!');
                        return;
                    }

                    // Tampilkan pesan loading di textarea kata kunci
                    suggestedKeywordsContainer.classList.remove('hidden');
                    suggestedKeywordsList.value = 'Menyarankan kata kunci, harap tunggu...'; // Pesan loading langsung
                    errorMessage.classList.add('hidden');


                    const keywordRequest = `Output ONLY the keywords, separated by commas. Do NOT include any conversational text, introductions, or explanations.

Dari prompt berikut, sarankan minimal 15-20 kata kunci yang relevan dan berpotensi tinggi untuk penjualan di platform stok seperti Adobe Stock. Berikan hanya daftar kata kunci, pisahkan dengan koma. Prompt ini bisa untuk gambar atau video.

Prompt:
${currentEnglishPrompt}
`;
                    const keywordsResponse = await callGeminiAPI(keywordRequest, suggestKeywordsButton, suggestKeywordsButton.querySelector('span:not(.loading-spinner)'), keywordsLoading);

                    if (keywordsResponse && keywordsResponse.trim() !== '') {
                        suggestedKeywordsList.value = keywordsResponse.trim();
                        errorMessage.classList.add('hidden');
                    } else {
                        suggestedKeywordsList.value = 'Tidak dapat menyarankan kata kunci. Coba prompt lain.';
                    }
                });
            } else { console.warn('suggestKeywordsButton not found!'); }

            // --- Event Listener untuk Tombol Hasilkan Deskripsi ---
            if (generateDescriptionButton) { // Tambahkan null check
                generateDescriptionButton.addEventListener('click', async () => {
                    const currentEnglishPrompt = generatedEnglishPrompt.value.trim();
                    const currentTitle = generatedTitle.value.trim();

                    if (!currentEnglishPrompt) {
                        showErrorMessage('Hasilkan prompt bahasa Inggris terlebih dahulu untuk membuat deskripsi!');
                        return;
                    }

                    descriptionResultContainer.classList.remove('hidden');
                    generatedDescription.value = 'Menghasilkan deskripsi, harap tunggu...'; // Pesan loading langsung
                    errorMessage.classList.add('hidden');


                    const descriptionRequest = `Output ONLY the description text. Do NOT include any conversational text, introductions, or explanations.

Dari prompt berikut dan judul "${currentTitle}", buat deskripsi yang ringkas (sekitar 1-2 paragraf), menarik, dan dioptimalkan SEO untuk platform stok seperti Adobe Stock. Deskripsi harus berfokus pada apa yang terlihat dalam gambar/video, suasana hati, dan potensi penggunaannya, tanpa menyebutkan bahwa itu dihasilkan oleh AI.

Prompt:
${currentEnglishPrompt}
`;
                    const descriptionResponse = await callGeminiAPI(descriptionRequest, generateDescriptionButton, generateDescriptionButton.querySelector('span:not(.loading-spinner)'), descriptionLoading);

                    if (descriptionResponse && descriptionResponse.trim() !== '') {
                        generatedDescription.value = descriptionResponse.trim();
                        errorMessage.classList.add('hidden');
                    } else {
                        generatedDescription.value = 'Tidak dapat menghasilkan deskripsi. Coba prompt lain.';
                    }
                });
            } else { console.warn('generateDescriptionButton not found!'); }

            // --- Event Listener untuk Tombol Buat Variasi Prompt ---
            if (generateVariationsButton) { // Tambahkan null check
                generateVariationsButton.addEventListener('click', async () => {
                    const currentEnglishPrompt = generatedEnglishPrompt.value.trim();
                    if (!currentEnglishPrompt) {
                        showErrorMessage('Hasilkan prompt bahasa Inggris terlebih dahulu untuk membuat variasi!');
                        return;
                    }

                    variationsResultContainer.classList.remove('hidden');
                    generatedVariations.value = 'Membuat variasi prompt, harap tunggu...'; // Pesan loading langsung
                    errorMessage.classList.add('hidden');


                    const variationsRequest = `Output ONLY the prompt variations, each on a new line. Do NOT include any conversational text, introductions, or explanations.

Berikan 3-5 variasi dari prompt berikut. Setiap variasi harus menjaga konsep inti tetapi mengubah sedikit frasa, penekanan, atau menambahkan detail kecil yang berbeda untuk eksplorasi kreatif. Pisahkan setiap variasi dengan baris baru. Prompt ini bisa untuk gambar atau video.

Prompt asli:
${currentEnglishPrompt}
`;
                    const variationsResponse = await callGeminiAPI(variationsRequest, generateVariationsButton, generateVariationsButton.querySelector('span:not(.loading-spinner)'), variationsLoading);

                    if (variationsResponse && variationsResponse.trim() !== '') {
                        generatedVariations.value = variationsResponse.trim();
                        errorMessage.classList.add('hidden');
                    } else {
                        generatedVariations.value = 'Tidak dapat membuat variasi. Coba prompt lain.';
                    }
                });
            } else { console.warn('generateVariationsButton not found!'); }

            // --- Event Listener untuk Tombol Perbaiki Gramatika/Ejaan ---
            if (correctGrammarButton) { // Tambahkan null check
                correctGrammarButton.addEventListener('click', async () => {
                    const currentEnglishPrompt = generatedEnglishPrompt.value.trim();
                    if (!currentEnglishPrompt) {
                        showErrorMessage('Hasilkan prompt bahasa Inggris terlebih dahulu untuk diperbaiki gramatikanya!');
                        return;
                    }

                    // Tampilkan pesan loading di textarea prompt Inggris
                    englishPromptResultContainer.classList.remove('hidden'); // Pastikan kontainer terlihat
                    generatedEnglishPrompt.value = 'Memperbaiki gramatika dan ejaan, harap tunggu...'; // Pesan loading langsung
                    errorMessage.classList.add('hidden');

                    const grammarRequest = `Output ONLY the corrected prompt. Do NOT include any conversational text, introductions, or explanations.

Perbaiki semua kesalahan tata bahasa, ejaan, dan tanda baca di prompt berikut. Jangan mengubah esensi atau detail inti prompt. Prompt ini bisa untuk gambar atau video.

Prompt untuk diperbaiki:
${currentEnglishPrompt}
`;
                    const correctedResponse = await callGeminiAPI(grammarRequest, correctGrammarButton, correctGrammarButton.querySelector('span:not(.loading-spinner)'), grammarLoading);

                    if (correctedResponse && correctedResponse.trim() !== '') {
                        generatedEnglishPrompt.value = correctedResponse.value = correctedResponse.trim();
                        errorMessage.classList.add('hidden');
                    } else {
                        // Kembalikan prompt asli jika tidak ada respons yang valid
                        generatedEnglishPrompt.value = currentEnglishPrompt;
                        showErrorMessage('Tidak dapat memperbaiki gramatika. Prompt asli tetap utuh.');
                    }
                });
            } else { console.warn('correctGrammarButton not found!'); }

            // --- Event Listener untuk Tombol Terjemahkan Prompt ---
            if (translatePromptButton) { // Tambahkan null check
                translatePromptButton.addEventListener('click', async () => {
                    const currentEnglishPrompt = generatedEnglishPrompt.value.trim();
                    const targetLanguage = translateLanguageSelect.value;
                    const targetLanguageName = translateLanguageSelect.options[translateLanguageSelect.selectedIndex].text;

                    if (!currentEnglishPrompt) {
                        showErrorMessage('Hasilkan prompt bahasa Inggris terlebih dahulu untuk diterjemahkan!');
                        return;
                    }
                    if (targetLanguage === 'Default') {
                        showErrorMessage('Harap pilih bahasa target untuk terjemahan!');
                        return;
                    }

                    translatedPromptContainer.classList.remove('hidden');
                    translatedPromptTextarea.value = `Menerjemahkan ke ${targetLanguageName}, harap tunggu...`; // Pesan loading langsung
                    translatedLanguageName.textContent = targetLanguageName;
                    errorMessage.classList.add('hidden');


                    const translateRequest = `Output ONLY the translated prompt. Do NOT include any conversational text, introductions, or explanations.

Terjemahkan prompt berikut ini ke dalam bahasa "${targetLanguage}". Pastikan terjemahan mempertahankan semua detail teknis, artistik, dan spesifikasi yang ada di prompt asli, dan tetap dalam format prompt yang efektif. Prompt ini bisa untuk gambar atau video.

Prompt Bahasa Inggris:
${currentEnglishPrompt}
`;
                    const translatedResponse = await callGeminiAPI(translateRequest, translatePromptButton, translatePromptButton.querySelector('span:not(.loading-spinner)'), translateLoading);

                    if (translatedResponse && translatedResponse.trim() !== '') {
                        translatedPromptTextarea.value = translatedResponse.trim();
                        errorMessage.classList.add('hidden');
                    } else {
                        translatedPromptTextarea.value = 'Tidak dapat menerjemahkan prompt. Coba prompt lain.';
                    }
                });
            } else { console.warn('translatePromptButton not found!'); }

            // --- Event Listener untuk Tombol Sarankan Palet Warna ---
            if (suggestColorPaletteButton) { // Tambahkan null check
                suggestColorPaletteButton.addEventListener('click', async () => {
                    const currentEnglishPrompt = generatedEnglishPrompt.value.trim();
                    if (!currentEnglishPrompt) {
                        showErrorMessage('Hasilkan prompt bahasa Inggris terlebih dahulu untuk mendapatkan saran palet warna!');
                        return;
                    }

                    colorPaletteContainer.classList.remove('hidden');
                    suggestedColorPaletteList.value = 'Menyarankan palet warna, harap tunggu...'; // Pesan loading langsung
                    errorMessage.classList.add('hidden');

                    const colorPaletteRequest = `Output ONLY the color palette suggestions, one color per line, in the format 'Color Name: #HEXCODE' or 'Color Name'. Do NOT add any conversational text, introductions, or explanations.

Based on the following prompt (which can be for an image or video), suggest a cohesive color palette. Provide 3-5 color names, ideally with their hex codes (e.g., #RRGGBB). Focus on colors that would visually complement the described scene and mood.

Prompt:
${currentEnglishPrompt}
`;
                    const colorPaletteResponse = await callGeminiAPI(colorPaletteRequest, suggestColorPaletteButton, suggestColorPaletteButton.querySelector('span:not(.loading-spinner)'), colorPaletteLoading);

                    if (colorPaletteResponse && colorPaletteResponse.trim() !== '') {
                        suggestedColorPaletteList.value = colorPaletteResponse.trim();
                        errorMessage.classList.add('hidden');
                    } else {
                        suggestedColorPaletteList.value = 'Tidak dapat menyarankan palet warna. Coba prompt lain.';
                    }
                });
            } else { console.warn('suggestColorPaletteButton not found!'); }

            // New: Event Listener for Suggest Concepts Button
            if (suggestConceptsButton) {
                suggestConceptsButton.addEventListener('click', async () => {
                    const currentEnglishPrompt = generatedEnglishPrompt.value.trim();
                    if (!currentEnglishPrompt) {
                        showErrorMessage('Hasilkan prompt bahasa Inggris terlebih dahulu untuk mendapatkan saran konsep!');
                        return;
                    }

                    suggestedConceptsContainer.classList.remove('hidden');
                    suggestedConceptsList.value = 'Menyarankan konsep terkait, harap tunggu...';
                    errorMessage.classList.add('hidden');

                    const conceptsRequest = `
<CONCEPTS_SUGGESTED>
[List of suggested concepts here, one per line]
</CONCEPTS_SUGGESTED>

Based on the following prompt, suggest 5-7 related concepts, themes, or abstract ideas that could expand upon or complement the core idea. List each concept on a new line.

Prompt:
${currentEnglishPrompt}
`;
                    const conceptsResponse = await callGeminiAPI(conceptsRequest, suggestConceptsButton, suggestConceptsButton.querySelector('span:not(.loading-spinner)'), conceptsLoading);

                    if (conceptsResponse) {
                        const conceptsMatch = conceptsResponse.match(/<CONCEPTS_SUGGESTED>([\s\S]*?)<\/CONCEPTS_SUGGESTED>/);
                        if (conceptsMatch && conceptsMatch[1].trim() !== '') {
                            suggestedConceptsList.value = conceptsMatch[1].trim();
                            errorMessage.classList.add('hidden');
                        } else {
                            suggestedConceptsList.value = 'Tidak dapat menyarankan konsep. Coba prompt lain.';
                        }
                    } else {
                        suggestedConceptsList.value = 'Tidak dapat menyarankan konsep. Coba prompt lain.';
                    }
                });
            } else { console.warn('suggestConceptsButton not found!'); }

            // New: Event Listener for Evaluate Prompt Button
            if (evaluatePromptButton) {
                evaluatePromptButton.addEventListener('click', async () => {
                    const currentEnglishPrompt = generatedEnglishPrompt.value.trim();
                    if (!currentEnglishPrompt) {
                        showErrorMessage('Hasilkan prompt bahasa Inggris terlebih dahulu untuk dievaluasi!');
                        return;
                    }

                    evaluationResultContainer.classList.remove('hidden');
                    generatedEvaluation.value = 'Mengevaluasi prompt, harap tunggu...';
                    errorMessage.classList.add('hidden');

                    const evaluationRequest = `
<PROMPT_EVALUATION>
[Detailed evaluation feedback here, including clarity, detail, and effectiveness for AI generation. Provide actionable suggestions for improvement.]
</PROMPT_EVALUATION>

Evaluate the following prompt for its clarity, level of detail, and overall effectiveness for generating high-quality AI images or videos. Provide constructive feedback and actionable suggestions for improvement.

Prompt to evaluate:
${currentEnglishPrompt}
`;
                    const evaluationResponse = await callGeminiAPI(evaluationRequest, evaluatePromptButton, evaluatePromptButton.querySelector('span:not(.loading-spinner)'), evaluateLoading);

                    if (evaluationResponse) {
                        const evaluationMatch = evaluationResponse.match(/<PROMPT_EVALUATION>([\s\S]*?)<\/PROMPT_EVALUATION>/);
                        if (evaluationMatch && evaluationMatch[1].trim() !== '') {
                            generatedEvaluation.value = evaluationMatch[1].trim();
                            errorMessage.classList.add('hidden');
                        } else {
                            generatedEvaluation.value = 'Tidak dapat mengevaluasi prompt. Coba prompt lain.';
                        }
                    } else {
                        generatedEvaluation.value = 'Tidak dapat mengevaluasi prompt. Coba prompt lain.';
                    }
                });
            } else { console.warn('evaluatePromptButton not found!'); }


            // --- Fungsi Salin untuk Judul, Prompt Inggris, Prompt Indonesia, Deskripsi, dan Kata Kunci ---
            function setupCopyButton(buttonElement, targetElement, originalText) {
                if (buttonElement && targetElement) { // Tambahkan null check
                    buttonElement.addEventListener('click', () => {
                        targetElement.select();
                        document.execCommand('copy');
                        buttonElement.textContent = 'Tersalin!';
                        setTimeout(() => {
                            buttonElement.textContent = originalText;
                        }, 2000);
                    });
                } else {
                    console.warn(`Copy button setup skipped: ${originalText} button or target element not found.`);
                }
            }

            // Panggil setupCopyButton dengan null check
            setupCopyButton(copyTitleButton, generatedTitle, 'Salin Judul');
            setupCopyButton(copyEnglishPromptButton, generatedEnglishPrompt, 'Salin Prompt Inggris');
            setupCopyButton(copyIndonesianPromptButton, generatedIndonesianPrompt, 'Salin Prompt Indonesia');
            setupCopyButton(copyKeywordsButton, suggestedKeywordsList, 'Salin Kata Kunci');
            setupCopyButton(copyDescriptionButton, generatedDescription, 'Salin Deskripsi');
            setupCopyButton(copyVariationsButton, generatedVariations, 'Salin Variasi');
            setupCopyButton(copyTranslatedPromptButton, translatedPromptTextarea, 'Salin Terjemahan');
            setupCopyButton(copyColorPaletteButton, suggestedColorPaletteList, 'Salin Palet Warna');
            setupCopyButton(copyConceptsButton, suggestedConceptsList, 'Salin Konsep'); // New: Copy concepts button
            setupCopyButton(copyScenarioPromptsButton, generatedScenarioPrompts, 'Salin Semua Prompt Skenario'); // New: Copy scenario prompts button
            setupCopyButton(copyEvaluationButton, generatedEvaluation, 'Salin Evaluasi'); // New: Copy evaluation button

            // --- Fungsi untuk mengisi input dengan nilai acak ---
            function randomizeInputs() {
                const currentActiveTab = document.querySelector('.tab-button.active').dataset.tab;
                let inputsToRandomize = [];

                if (currentActiveTab === 'image') {
                    inputsToRandomize = [
                        { element: subjectInput, type: 'text', options: ['pemandangan kota futuristik', 'robot kuno di hutan', 'naga terbang di atas gunung es'] },
                        { element: actionInput, type: 'text', options: ['berjalan di jalanan neon', 'bertempur dengan pedang laser', 'bermeditasi di kuil kuno'] },
                        { element: settingInput, type: 'text', options: ['distrik lampu merah Tokyo', 'planet gurun yang sepi', 'kota bawah laut yang hancur'] },
                        { element: moodInput, type: 'text', options: ['melankolis', 'penuh harapan', 'tegang', 'damai'] },
                        { element: materialTextureInput, type: 'text', options: ['logam berkarat', 'kaca berkilau', 'tekstur organik'] },
                        { element: expressionEmotionInput, type: 'text', options: ['ekspresi serius', 'mata kosong', 'senyum tipis'] },
                        { element: ageEraInput, type: 'text', options: ['era cyberpunk', 'masa depan distopia', 'masa lalu yang terlupakan'] },
                        { element: promptIdeaInput, type: 'text', options: ['pencahayaan dramatis', 'detail rumit', 'kabut tebal'] },
                        { element: negativePromptInput, type: 'text', options: ['buram, cacat', 'teks, logo', 'warna kusam'] }
                    ];
                    // Dropdowns
                    randomizeSelect(imageStyleSelect);
                    randomizeSelect(imageCategorySelect);
                    randomizeSelect(cameraAngleSelect);
                    randomizeSelect(timeOfDaySelect);
                    randomizeSelect(aspectRatioSelect);
                    randomizeSelect(resolutionSelect);

                } else if (currentActiveTab === 'video') {
                    inputsToRandomize = [
                        { element: videoSubjectInput, type: 'text', options: ['kendaraan terbang', 'karakter cyborg', 'lanskap perkotaan'] },
                        { element: videoActionInput, type: 'text', options: ['melaju cepat', 'berpatroli', 'menjelajah'] },
                        { element: videoSettingInput, type: 'text', options: ['jalan-jalan yang basah', 'laboratorium rahasia', 'pabrik terbengkalai'] },
                        { element: videoMoodInput, type: 'text', options: ['intens', 'misterius', 'dinamis'] },
                        { element: videoDurationInput, type: 'number', min: 5, max: 30 },
                        { element: dialogueLanguageInput, type: 'text', options: ['Inggris', 'Jepang', 'Tanpa dialog'] },
                        { element: dialogueTextInput, type: 'text', options: ['"Selamat datang di masa depan."', '"Apa yang kamu cari?"', '"Sistem offline."'] },
                        { element: videoIdeaInput, type: 'text', options: ['efek glitch', 'hologram interaktif', 'pantulan neon'] },
                        { element: videoNegativePromptInput, type: 'text', options: ['goyangan kamera', 'artefak', 'resolusi rendah'] }
                    ];
                    // Dropdowns
                    randomizeSelect(cameraMovementSelect);
                    randomizeSelect(videoStyleSelect);

                } else if (currentActiveTab === 'director') {
                    inputsToRandomize = [
                        { element: totalVideoDurationInput, type: 'number', min: 1, max: 5 },
                        { element: segmentDurationInput, type: 'number', min: 5, max: 15 },
                        { element: scenarioSubjectInput, type: 'text', options: ['kisah detektif', 'petualangan sci-fi', 'drama perkotaan'] },
                        { element: plotOutlineInput, type: 'text', options: ['detektif memecahkan kasus', 'pahlawan menemukan artefak', 'kehidupan kota yang sibuk'] },
                        { element: directorIdeaInput, type: 'text', options: ['montase cepat', 'dialog internal', 'sudut pandang orang pertama'] },
                        { element: directorNegativePromptInput, type: 'text', options: ['gambar statis', 'musik ceria', 'plot twist yang jelas'] }
                    ];
                    // Dropdowns
                    randomizeSelect(directorVideoStyleSelect);
                }

                inputsToRandomize.forEach(inputData => {
                    if (inputData.element) {
                        if (inputData.type === 'text') {
                            const randomIndex = Math.floor(Math.random() * inputData.options.length);
                            inputData.element.value = inputData.options[randomIndex];
                        } else if (inputData.type === 'number') {
                            inputData.element.value = Math.floor(Math.random() * (inputData.max - inputData.min + 1)) + inputData.min;
                        }
                    }
                });

                function randomizeSelect(selectElement) {
                    if (selectElement) {
                        const options = Array.from(selectElement.options).filter(opt => opt.value !== 'Default');
                        if (options.length > 0) {
                            const randomIndex = Math.floor(Math.random() * options.length);
                            selectElement.value = options[randomIndex].value;
                        } else {
                            selectElement.value = 'Default';
                        }
                    }
                }
            }

            // --- Fungsi untuk membuat prompt manual (mengosongkan hasil, tidak input) ---
            function manualEdit() {
                resetResultArea(); // Hanya mengosongkan area hasil
                showErrorMessage('Anda sekarang dapat mengedit prompt secara manual di bidang input.');
            }


            // --- Event Listener untuk Tombol Bersihkan Semua ---
            if (brushButton) {
                brushButton.addEventListener('click', () => {
                    // Clear image inputs
                    promptIdeaInput.value = '';
                    imageStyleSelect.value = 'Fotorealistik';
                    imageCategorySelect.value = 'Default';
                    subjectInput.value = '';
                    actionInput.value = '';
                    settingInput.value = '';
                    moodInput.value = '';
                    cameraAngleSelect.value = 'Default';
                    timeOfDaySelect.value = 'Default';
                    materialTextureInput.value = '';
                    expressionEmotionInput.value = '';
                    ageEraInput.value = '';
                    aspectRatioSelect.value = 'Default';
                    resolutionSelect.value = 'Default';
                    negativePromptInput.value = '';

                    // Clear video inputs
                    videoSubjectInput.value = '';
                    videoActionInput.value = '';
                    videoSettingInput.value = '';
                    videoMoodInput.value = '';
                    videoDurationInput.value = '';
                    cameraMovementSelect.value = 'Default';
                    videoStyleSelect.value = 'Default';
                    dialogueLanguageInput.value = '';
                    dialogueTextInput.value = '';
                    videoIdeaInput.value = '';
                    videoNegativePromptInput.value = '';

                    // Clear director inputs
                    totalVideoDurationInput.value = '';
                    segmentDurationInput.value = '';
                    directorVideoStyleSelect.value = 'Default';
                    scenarioSubjectInput.value = '';
                    plotOutlineInput.value = '';
                    directorIdeaInput.value = '';
                    directorNegativePromptInput.value = '';

                    resetResultArea(); // Bersihkan semua area hasil dan pesan
                    // Ensure image tab is active after clearing
                    togglePromptInputs('image');
                });
            } else { console.warn('brushButton not found!'); }

            // --- Event Listener untuk Tombol Acak ---
            if (randomButton) {
                randomButton.addEventListener('click', randomizeInputs);
            } else { console.warn('randomButton not found!'); }

            // --- Event Listener untuk Tombol Buat Manual ---
            if (manualButton) {
                manualButton.addEventListener('click', manualEdit);
            } else { console.warn('manualButton not found!'); }


            // Initial toggle to show image inputs by default
            togglePromptInputs('image');
        };
    </script>
</body>
</html>
